<!DOCTYPE html>
<html ⚡>
  <head>
    <meta charset="utf-8">
    <link rel="canonical" href="https://t-kojima.github.io/2018/07/28/0034-all-becomes-reduce-5/" >
    <title>全てがReduceになる(5) - Today&#39;s Commit</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
    <meta property="og:title" content="全てがReduceになる(5)">
	<meta property="og:type" content="article">
	<meta property="og:url" content="https://t-kojima.github.io/2018/07/28/0034-all-becomes-reduce-5/">
	
		<meta property="og:image" content="/amp-dist/sample/sample-substituteTitleImage.png">
	
	<meta property="og:site_name" content="Today&#39;s Commit">
	
		<meta property="og:description" content="&lt;p&gt;&lt;a href=&#34;https://t-kojima.github.io/2018/07/26/0033-all-becomes-reduce-4/&#34;&gt;前回&lt;/a&gt;に続き、Array のメソッドを reduce で再実装する。&lt;/p&gt;
&lt;p&gt;今回は Node における Array#sort のアルゴリズムの解明で非常に長い内容になってしまった。なので sort のみです。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;sort&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/t-kojima/practice-all-becomes-reduce&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;実装及びテストのリポジトリ(practice-all-becomes-reduce)&lt;/a&gt;&lt;/p&gt;">
	
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="Today&#39;s Commit">
	<meta name="twitter:url" content="https://t-kojima.github.io/2018/07/28/0034-all-becomes-reduce-5/">
	<meta name="twitter:title" content="全てがReduceになる(5) - Today&#39;s Commit">
	
		<meta name="twitter:description" content="&lt;p&gt;&lt;a href=&#34;https://t-kojima.github.io/2018/07/26/0033-all-becomes-reduce-4/&#34;&gt;前回&lt;/a&gt;に続き、Array のメソッドを reduce で再実装する。&lt;/p&gt;
&lt;p&gt;今回は Node における Array#sort のアルゴリズムの解明で非常に長い内容になってしまった。なので sort のみです。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;sort&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/t-kojima/practice-all-becomes-reduce&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;実装及びテストのリポジトリ(practice-all-becomes-reduce)&lt;/a&gt;&lt;/p&gt;">
	
    
    	<meta name="twitter:image" content="/amp-dist/sample/sample-substituteTitleImage.png">
	
	
	
    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style>
    <noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>
    <!--
  	<script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script>
    -->
    
    
    
    
    
    
    
    
    
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script type="application/ld+json">
		{
			"@context": "http://schema.org",
			"@type": "BlogPosting",
			"headline": "全てがReduceになる(5)",
			
			"description": "&lt;p&gt;&lt;a href=&#34;https://t-kojima.github.io/2018/07/26/0033-all-becomes-reduce-4/&#34;&gt;前回&lt;/a&gt;に続き、Array のメソッドを reduce で再実装する。&lt;/p&gt;
&lt;p&gt;今回は Node における Array#sort のアルゴリズムの解明で非常に長い内容になってしまった。なので sort のみです。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;sort&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/t-kojima/practice-all-becomes-reduce&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;実装及びテストのリポジトリ(practice-all-becomes-reduce)&lt;/a&gt;&lt;/p&gt;",
			
			"mainEntityOfPage":{
			    "@type":"WebPage",
			    "@id":"https://t-kojima.github.io/2018/07/28/0034-all-becomes-reduce-5/"
			},
			"datePublished": "2018-07-27T16:16:49.000Z",
			"dateModified": "2018-12-20T11:07:38.289Z",
			
			"image": {
				"@type": "ImageObject",
				"url": "/amp-dist/sample/sample-substituteTitleImage.png",
				"width" : "1024",
				"height" : "800"
			},
			
			"author": {
			    "@type": "Person",
			    "name": "t-kojima"
			},
			"publisher": {
			    "@type": "Organization",
			    "name": "Today&#39;s Commit"
			    
			    ,
			    "logo": {
			      "@type": "ImageObject",
			      "url": "https://t-kojima.github.io/amp-dist/sample/sample-logo.png",
			      "width": 600,
			      "height": 60
			    }
			    
			}
		}
	</script>
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
	
	<style amp-custom>
		
abbr,
acronym,
address,
applet,
big,
blockquote,
body,
caption,
cite,
code,
dd,
del,
dfn,
div,
dl,
dt,
em,
fieldset,
form,
h1,
h2,
h3,
h4,
h5,
h6,
html,
iframe,
img,
ins,
kbd,
label,
legend,
li,
object,
ol,
p,
pre,
q,
s,
samp,
small,
span,
strike,
strong,
sub,
sup,
table,
tbody,
td,
tfoot,
th,
thead,
tr,
tt,
ul,
var {
  border: 0;
  font-family: inherit;
  font-size: 1rem;
  font-style: inherit;
  font-weight: inherit;
  margin: 0;
  outline: 0;
  padding: 0;
  vertical-align: baseline;
}
abbr {
  cursor: help;
  border-bottom: 1px dotted;
  font-variant: normal;
}
acronym {
  border-bottom: 1px dotted;
  font-variant: normal;
}
body {
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  -webkit-text-size-adjust: 100%;
  background: #fff;
  color: #2d3d40;
  font-family: sans-serif;
  font-size: 1rem;
  font-weight: 500;
  line-height: 2rem;
  text-rendering: optimizelegibility;
}
button::-moz-focus-inner,
input::-moz-focus-inner,
figure.highlight td,
.post .entry-content figure.highlight th {
  border: 0;
  padding: 0;
}
caption,
table,
td,
th {
  vertical-align: middle;
}
caption,
td,
th,
.table-align-left {
  text-align: left;
}
del {
  text-decoration: line-through;
}
html {
  font-size: 14px;
}
:root sub,
:root sup {
  vertical-align: baseline;
}
table {
  border-collapse: separate;
  border-spacing: 0;
}
a {
  color: #e91e63;
  text-decoration: none;
  -webkit-transition: 0.7s;
  -ms-transition: 0.7s;
  -moz-transition: 0.7s;
  -o-transition: 0.7s;
  -webkit-transition: 0.7s;
  -moz-transition: 0.7s;
  -o-transition: 0.7s;
  -ms-transition: 0.7s;
  transition: 0.7s;
  border: 0;
  font-family: inherit;
  font-size: 1rem;
  font-style: inherit;
  font-weight: inherit;
  margin: 0;
  outline: 0;
  padding: 0;
  vertical-align: baseline;
}
a img {
  border: none;
}
a:hover {
  -webkit-transition: 0.2s;
  -ms-transition: 0.2s;
  -moz-transition: 0.2s;
  -o-transition: 0.2s;
  -webkit-transition: 0.2s;
  -moz-transition: 0.2s;
  -o-transition: 0.2s;
  -ms-transition: 0.2s;
  transition: 0.2s;
  color: #930e3b;
}
@media (min-width: 481px) {
  html {
    font-size: 16px;
  }
}
@media (min-width: 0px) and (max-width: 480px) {
  html {
    font-size: 14px;
  }
}
.clearfix:after {
  clear: both;
  visibility: hidden;
  content: ".";
  display: block;
  height: 0;
}
.left {
  float: left;
}
.right {
  float: right;
}
.circle {
  -webkit-border-radius: 50%;
  border-radius: 50%;
}
.thumbImg-w {
  width: 100px;
  height: 100px;
  display: inline-block;
  position: relative;
  overflow: hidden;
}
.thumbImg {
  top: 50%;
  left: 50%;
  position: absolute;
  -webkit-transform: translate(-50%, -50%);
  -ms-transform: translate(-50%, -50%);
  -webkit-transform: translate(-50%, -50%);
  -moz-transform: translate(-50%, -50%);
  -o-transform: translate(-50%, -50%);
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}
.__web-inspector-hide-shortcut__ {
  visibility: hidden ;
}
button {
  -webkit-box-align: start;
  -moz-box-align: start;
  -o-box-align: start;
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
  text-align: center;
  cursor: default;
  color: buttontext;
  background-color: buttonface;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  padding: 2px 6px 3px;
  border-width: 2px;
  border-style: outset;
  border-color: buttonface;
  -webkit-border-image: initial;
  -moz-border-image: initial;
  -o-border-image: initial;
  border-image: initial;
  text-rendering: auto;
  color: initial;
  letter-spacing: normal;
  word-spacing: normal;
  text-transform: none;
  text-indent: 0px;
  text-shadow: none;
  display: inline-block;
  text-align: start;
  margin: 0em 0em 0em 0em;
  font: 11px system-ui;
  -webkit-writing-mode: horizontal-tb;
  -webkit-appearance: button;
}
.hamburger {
  display: inline-block;
  background-color: transparent;
  background-image: url("data:image/svg+xmlutf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-3 -6 24 24\"><path fill=\"#4A4A4A\" d=\"M0 12h18v-2H0v2M0 7h18V5H0v2M0 0v2h18V0H0\"/></svg>");
  background-repeat: no-repeat;
  -webkit-background-size: 30px 24px;
  -moz-background-size: 30px 24px;
  background-size: 30px 24px;
  background-position: center center;
  border: none;
  margin: 0;
  padding: 0;
  width: 60px;
  height: 60px;
  cursor: pointer;
  -ms-flex-item-align: center;
  -ms-grid-row-align: center;
  -webkit-align-self: center;
  align-self: center;
  -ms-flex-item-align: center;
}
.nav ul:after {
  clear: both;
  visibility: hidden;
}
.nav,
.nav-icon {
  position: relative;
}
.nav ul {
  display: block;
}
.nav ul li {
  display: block;
}
.nav ul li a {
  display: block;
}
.tab {
  position: relative;
  color: #424242;
  padding: 6px;
  margin: 0 4px;
  text-decoration: none;
  text-transform: uppercase;
  font-weight: 400;
  -webkit-transition: 0.1s ease color;
  -webkit-transition: 0.1s ease color;
  -moz-transition: 0.1s ease color;
  -o-transition: 0.1s ease color;
  -ms-transition: 0.1s ease color;
  transition: 0.1s ease color;
}
amp-sidebar {
  width: 200px;
}
amp-sidebar ul {
  padding: 10px 0;
}
amp-sidebar li a {
  display: block;
  padding: 10px 20px;
}
header {
  height: 60px;
  background-color: #222f31;
  -webkit-box-shadow: 0 -1px 0 #3c5155 inset, 0 -3px 0 #1e292b inset;
  box-shadow: 0 -1px 0 #3c5155 inset, 0 -3px 0 #1e292b inset;
  -webkit-box-shadow: 0 -1px 0 #3c5155 inset, 0 -3px 0 #1e292b inset;
}
header .header-title a {
  padding: 0 0 0 20px;
  height: 60px;
  line-height: 60px;
  font-size: 20px;
  color: #fff;
  letter-spacing: 0.2em;
}
header .nav-container {
  display: -webkit-box;
  display: -ms-flexbox;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  -webkit-box-pack: justify;
  -moz-box-pack: justify;
  -o-box-pack: justify;
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
}
header .left-nav {
  display: -webkit-box;
  display: -ms-flexbox;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-align: center;
  -ms-flex-align: center;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  -webkit-box-pack: start;
  -ms-flex-pack: start;
  -webkit-box-pack: start;
  -moz-box-pack: start;
  -o-box-pack: start;
  -ms-flex-pack: start;
  -webkit-justify-content: flex-start;
  justify-content: flex-start;
  font-size: 20px;
  margin-left: 0;
  font-weight: 300;
  -webkit-box-pack: start;
  -ms-flex-pack: start;
  -webkit-box-pack: start;
  -moz-box-pack: start;
  -o-box-pack: start;
  -ms-flex-pack: start;
  -webkit-justify-content: flex-start;
  justify-content: flex-start;
  -webkit-box-flex: 1;
  -ms-flex: 1 1 auto;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1 1 auto;
  -ms-flex: 1 1 auto;
  flex: 1 1 auto;
  text-align: left;
  width: auto;
  font-size: 15px;
}
header .right {
  font-size: 15px;
}
header .alt {
  padding: 0;
  text-align: right;
  display: -webkit-box;
  display: -ms-flexbox;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-align: stretch;
  -ms-flex-align: stretch;
  -webkit-box-align: stretch;
  -moz-box-align: stretch;
  -o-box-align: stretch;
  -ms-flex-align: stretch;
  -webkit-align-items: stretch;
  align-items: stretch;
  -webkit-box-pack: center;
  -ms-flex-pack: center;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
}
.blog-title a {
  position: relative;
}
button {
  -webkit-box-align: start;
  -moz-box-align: start;
  -o-box-align: start;
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
  text-align: center;
  cursor: default;
  color: buttontext;
  background-color: buttonface;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  padding: 2px 6px 3px;
  border-width: 2px;
  border-style: outset;
  border-color: buttonface;
  -webkit-border-image: initial;
  -moz-border-image: initial;
  -o-border-image: initial;
  border-image: initial;
  text-rendering: auto;
  color: initial;
  letter-spacing: normal;
  word-spacing: normal;
  text-transform: none;
  text-indent: 0px;
  text-shadow: none;
  display: inline-block;
  text-align: start;
  margin: 0em 0em 0em 0em;
  font: 11px system-ui;
  -webkit-writing-mode: horizontal-tb;
  -webkit-appearance: button;
}
.__web-inspector-hide-shortcut__ {
  visibility: hidden ;
}
.hamburger {
  display: inline-block;
  background-color: transparent;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-3 -6 24 24\"><path fill=\"#FFF\" d=\"M0 12h18v-2H0v2M0 7h18V5H0v2M0 0v2h18V0H0\"/></svg>");
  background-repeat: no-repeat;
  -webkit-background-size: 30px 24px;
  -moz-background-size: 30px 24px;
  background-size: 30px 24px;
  background-position: center center;
  border: none;
  margin: 0;
  padding: 0;
  width: 60px;
  height: 60px;
  cursor: pointer;
  -ms-flex-item-align: center;
  -ms-grid-row-align: center;
  -webkit-align-self: center;
  align-self: center;
  -ms-flex-item-align: center;
}
.tab {
  position: relative;
  color: #2d3d40;
  padding: 6px;
  margin: 0 4px;
  text-decoration: none;
  text-transform: uppercase;
  font-weight: 400;
  -webkit-transition: 0.1s ease color;
  -webkit-transition: 0.1s ease color;
  -moz-transition: 0.1s ease color;
  -o-transition: 0.1s ease color;
  -ms-transition: 0.1s ease color;
  transition: 0.1s ease color;
}
amp-sidebar {
  width: 250px;
  background-color: #182022;
}
amp-sidebar ul {
  padding: 10px 0;
}
amp-sidebar li {
  border-top: 1px solid #2f4043;
}
amp-sidebar li:last-child {
  border-bottom: 1px solid #2f4043;
}
amp-sidebar li a {
  color: #fff;
  font-weight: bold;
  display: block;
  padding: 10px 20px;
}
amp-sidebar li a:hover {
  color: #ccc;
  background-color: #030404;
}
.categories-header {
  background-color: #2d3d40;
  padding: 0rem 0.8rem;
}
.categories-header a {
  color: #fff;
}
.categories-header a:hover {
  color: #fff;
}
.categories-header .breadcrumb ol li {
  list-style: none;
  display: inline-block;
  margin: 0;
}
.categories-header .breadcrumb ol li span {
  font-size: 0.8rem;
  font-weight: bold;
}
.categories-header .breadcrumb ol li:after {
  content: "/";
  color: #fff;
  display: inline-block;
  margin: 0 0.4rem;
}
.categories-header .breadcrumb ol li:last-child:after {
  content: "";
  margin: 0;
}
.entry-header {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-align-items: center;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}
.entry-header .flx:first-child {
  margin: 0 1rem 0 0;
}
.header-cap {
  -webkit-flex-grow: 3;
  -webkit-box-flex: 3;
  -moz-box-flex: 3;
  -o-box-flex: 3;
  -ms-box-flex: 3;
  box-flex: 3;
  -webkit-flex-grow: 3;
  flex-grow: 3;
}
.title-cover {
  background-color: #fff;
  color: #2d3d40;
  padding: 1.5rem 0.8rem 0 0.8rem;
}
.title-cover a {
  font-size: 1.2rem;
  color: #2d3d40;
  text-align: left;
  font-weight: bold;
}
.entry-title {
  margin: 0;
}
.entry-meta-header {
  font-size: 0.85rem;
  text-align: center;
}
.entry-meta-header .date {
  font-family: sans-serif;
}
h1 a,
h2 a,
h3 a,
h4 a,
h5 a,
h6 a {
  color: #2d3d40;
  text-decoration: none;
}
h1 a:hover,
h2 a:hover,
h3 a:hover,
h4 a:hover,
h5 a:hover,
h6 a:hover {
  color: #e91e63;
}
#container {
  margin-left: auto;
  margin-right: auto;
}
#main {
  margin-bottom: 3em;
  padding-left: 0;
}
.post {
  margin-bottom: 3rem;
  position: relative;
}
.entry-content {
  margin: 0 0.6rem;
  font-size: 1rem;
}
.entry-content h1 {
  font-size: 1.7rem;
  line-height: 1.5;
  margin: 1em 0 0.8em;
}
.entry-content h2,
.entry-content h3,
.entry-content h4,
.entry-content h5,
.entry-content h6,
.entry-content h2 span,
.entry-content h3 span,
.entry-content h4 span,
.entry-content h5 span,
.entry-content h6 span {
  color: #98b8be;
  font-weight: bold;
}
.entry-content h2,
.entry-content h2 span {
  font-size: 1.8rem;
  line-height: 2.6rem;
  text-align: center;
}
.entry-content h2 {
  border-bottom: 2px solid #cce4e8;
  margin: 4.5rem 0 0.5em;
  padding: 0.8em 0;
}
.entry-content h3,
.entry-content h3 span {
  font-size: 1.6rem;
  line-height: 2.2rem;
  text-align: center;
}
.entry-content h3 {
  margin: 3.6rem 0.8rem 3rem 0.8rem;
  padding: 0;
}
.entry-content h4,
.entry-content h4 span {
  font-size: 1.4rem;
  line-height: 2rem;
  text-align: center;
}
.entry-content h4 {
  margin: 3.6rem 0.8rem 3rem 0.8rem;
  padding: 0;
}
.entry-content h5,
.entry-content h5 span {
  font-size: 1.2rem;
  line-height: 1.8rem;
  text-align: center;
}
.entry-content h5 {
  margin: 3.6rem 0.8rem 3rem 0.8rem;
  padding: 0;
}
.entry-content h6,
.entry-content h6 span {
  font-size: 1.1rem;
  line-height: 1.6rem;
  text-align: center;
}
.entry-content h6 {
  margin: 3.6rem 0.8rem 3rem 0.8rem;
  padding: 0;
}
.entry-content p {
  font-size: 1rem;
  letter-spacing: 0.05rem;
  line-height: 2.2rem;
  margin: 3rem 0.8rem;
}
.entry-content p a {
  word-wrap: break-word;
  overflow-wrap: break-word;
  display: inline;
  border-bottom: 1px dashed #f1729d;
  padding-bottom: 0.3rem;
}
.entry-content p a:hover {
  border-bottom: 1px dashed #9c0f3f;
  padding-bottom: 0.4rem;
}
.entry-content em {
  background-color: #f9f5d1;
  color: #886d00;
  font-style: normal;
  margin: 0 2px;
  padding: 0.4em;
}
.entry-content strong {
  color: #871c1c;
  font-style: normal;
  margin: 0 2px;
  padding: 0.4em;
  background-color: #fadcdc;
}
.entry-content hr {
  border: 0;
  border-top: 3px solid #cce4e8;
  margin: 3rem auto;
  width: 20%;
}
.entry-content img,
.entry-content video {
  display: block;
  height: auto;
  margin: auto;
  max-width: 100%;
}
.entry-content iframe {
  width: 100% ;
}
.entry-content blockquote {
  margin: 3rem 0.8rem;
  padding: 1rem 1.8rem;
  position: relative;
  background-color: none;
  border-left: 3px solid #98b8be;
  font-style: italic;
}
.entry-content blockquote p {
  margin: 0.5rem 0;
}
.entry-content blockquote blockquote {
  border-left: none;
}
.entry-content .table-wrapper {
  margin: 3rem 0.8rem;
}
.entry-content table {
  border-collapse: collapse;
  border-spacing: 0;
  overflow: auto;
  display: block;
  font-size: 0.85rem;
  margin: 0 auto;
  width: auto;
}
.entry-content td,
.entry-content th {
  line-height: 1.8em;
  padding: 0.8rem 0.8rem;
  font-size: 0.85rem;
}
.entry-content td em,
.entry-content th em,
.entry-content td strong,
.entry-content th strong,
.entry-content td a,
.entry-content th a {
  font-size: 0.85rem;
}
.entry-content td {
  border: 1px solid #c4c4c4;
}
.entry-content th {
  background-color: #ecf5f7;
  border: 1px solid #c4c4c4;
}
.entry-content .table-align-center {
  text-align: center;
}
.entry-content .table-align-right {
  text-align: right;
}
.entry-content ul,
.entry-content ol,
.entry-content dl {
  margin: 3rem 0 3rem 1.6rem;
  padding: 0;
  list-style: none;
  font-size: 1rem;
}
.entry-content ul li,
.entry-content ol li,
.entry-content dl li {
  line-height: 2rem;
  position: relative;
  padding: 0;
}
.entry-content ul li p,
.entry-content ol li p,
.entry-content dl li p {
  line-height: 2rem;
  margin: 0;
}
.entry-content ul li p:not(:first-child),
.entry-content ol li p:not(:first-child),
.entry-content dl li p:not(:first-child) {
  color: #57767c;
  margin: 0.5rem;
}
.entry-content ul li ul,
.entry-content ol li ul,
.entry-content dl li ul,
.entry-content ul li ol,
.entry-content ol li ol,
.entry-content dl li ol,
.entry-content ul li dl,
.entry-content ol li dl,
.entry-content dl li dl {
  margin: 1rem;
}
.entry-content ul li {
  margin: 0.4rem 0 0.4rem 0.8rem;
}
.entry-content ul li::after {
  position: absolute;
  display: block;
  content: '';
  top: 0.75rem;
  left: -1rem;
  width: 0.5rem;
  height: 0.5rem;
  background-color: #cce4e8;
  border-radius: 100%;
}
.entry-content ol {
  counter-reset: number;
}
.entry-content ol li {
  margin: 0.4rem 0 0.4rem 2rem;
}
.entry-content ol li p:first-child {
  display: inline-block;
  line-height: 1.6rem;
  height: 1.6rem;
}
.entry-content ol li:before {
  position: absolute;
  display: inline-block;
  float: left;
  margin: 0 0.2rem 0 0;
  padding: 0;
  counter-increment: number;
  content: counter(number);
  left: -2.2rem;
  top: 0.2rem;
  background-color: #98b8be;
  width: 1.6rem;
  height: 1.6rem;
  border-radius: 50%;
  color: #fff;
  text-align: center;
  font-weight: bold;
  font-size: 0.8rem;
  line-height: 1.6rem;
}
kbd {
  font-family: sans-serif;
  text-align: center;
  display: inline-block;
  color: #425a5e;
  -moz-osx-font-smoothing: grayscale;
  -webkit-border-radius: 3px;
  -webkit-box-shadow: 0 0 10px #e8e8e8 inset, 0 1px 0 #c3c3c3, 0 2px 0 #c9c9c9, 0 3px 3px #333;
  box-shadow: 0 0 10px #e8e8e8 inset, 0 1px 0 #c3c3c3, 0 2px 0 #c9c9c9, 0 3px 3px #333;
  -webkit-box-shadow: 0 0 10px #e2e2e2 inset, 0 1px 0 #c3c3c3, 0 2px 0 #c9c9c9, 0 3px 3px #333;
  -webkit-font-smoothing: subpixel-antialiased;
  background: #fff;
  border-left: 1px solid #fff;
  border-radius: 3px;
  border-right: 1px solid #e6e6e6;
  border-top: 1px solid #fff;
  font-size: 0.85rem;
  line-height: 1rem;
  margin: 5px;
  padding: 6px 8px 3px;
  text-shadow: 0 1px 0 #fff;
  vertical-align: baseline;
  
}
img.responsive-img {
  height: auto;
  max-width: 100%;
}
video.responsive-video {
  height: auto;
  max-width: 100%;
}
amp-instagram,
amp-vimeo,
amp-video,
amp-youtube,
amp-twitter,
.soundcloud-wrapper,
.amp-img-wrapper,
.googleAdPost,
.ad-footer {
  margin: 3rem 0.8rem;
}
code,
figure.highlight .code,
pre {
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: subpixel-antialiased;
}
code,
pre,
samp {
  font-family: Menlo, Consolas, Monaco, Consolas, monospace;
}
p code {
  font-size: 1rem;
}
code,
pre {
  font-size: 0.85rem;
  letter-spacing: 0.05rem;
  background-color: #ecf5f7;
  color: #007e96;
}
code {
  margin: 0 3px;
  padding: 0.4em;
}
samp {
  font-size: 0.85rem;
  letter-spacing: 0.05rem;
}
sub,
sup {
  font-size: 0.75rem;
  line-height: 0;
  position: relative;
}
sub {
  bottom: -0.2em;
}
sup {
  top: -0.5em;
}
pre {
  font-size: 1rem;
  letter-spacing: 0.05rem;
  margin: 0 3px;
  padding: 15px;
  -webkit-background-clip: padding;
  -moz-background-clip: padding;
  background-clip: padding-box;
  border: 0;
  line-height: 1.3rem;
  overflow-x: auto;
}
pre .addition,
pre .css .tag,
pre .keyword,
pre .method,
pre .nginx .title,
pre .request,
pre .status,
pre .winutils {
  color: #66d9ef;
}
pre .attr_selector,
pre .cdata,
pre .clojure .title,
pre .diff .change,
pre .important {
  color: #9882eb;
}
pre .preprocessor {
  color: #9882eb;
}
pre .preprocessor .keyword {
  color: #9882eb;
}
pre .shebang,
pre .special,
pre .subst {
  color: #9882eb;
}
pre .symbol {
  color: #9882eb;
}
pre .symbol .string {
  color: #9882eb;
}
pre .attribute,
pre .class .title,
pre .constant,
pre .haskell .type,
pre .lisp .body,
pre .parent,
pre .smalltalk .number,
pre .variable {
  color: #a6e22e;
}
pre .built_in,
pre .chunk,
pre .decorator,
pre .id,
pre .identifier,
pre .literal,
pre .localvars,
pre .title,
pre .vhdl,
pre .deletion {
  color: #f92672;
}
pre .command,
pre .hexcolor,
pre .number,
pre .phpdoc,
pre .regexp,
pre .string,
pre .tag .value,
pre .tex .formula {
  color: #e6db74;
}
pre .comment,
pre .diff .header,
pre .doctype,
pre .javadoc,
pre .lisp .string,
pre .pi,
pre .template_comment {
  color: #75715e;
  font-weight: normal;
}
.line {
  font-size: 0.85rem;
  letter-spacing: 0.05rem;
  line-height: 2rem;
  color: #f8f8f2;
}
.line span {
  font-size: 0.85rem;
  letter-spacing: 0.05rem;
}
.gist {
  background: #fff;
  border: 1px solid color-gutter;
  color: #f8f8f2;
  line-height: 1.6rem;
  margin-top: 15px;
  overflow: auto;
  padding: 7px 15px;
}
.gist .gist-file {
  border: none;
  font-family: inherit;
  font-size: 1rem;
  letter-spacing: 0;
  margin: 0;
}
.gist .gist-file .gist-data {
  background: 0 0;
  border-bottom: none;
}
.gist .gist-file .gist-data pre {
  font-family: Menlo, Consolas, Monaco, Consolas, monospace;
  padding: 0 ;
}
.gist .gist-file .gist-meta {
  background: 0 0;
  color: #f8f8f2;
  font-size: 1rem;
  margin-top: 5px;
  padding: 0;
}
.gist .gist-file .gist-meta a {
  color: #f8f8f2;
}
.gist .gist-file .gist-meta a:visited {
  color: #f8f8f2;
}
figure.highlight {
  font-size: 0.95rem;
  margin: 3rem 0.8rem;
  background: #263338;
  border: 1px solid color-gutter;
  line-height: 2rem;
  overflow: auto;
  position: relative;
}
figure.highlight .code {
  padding: 0 1em 1em 1em;
  color: #f8f8f2;
}
figure.highlight .gutter {
  display: none;
}
figure.highlight figcaption {
  font-size: 1rem;
  font-weight: bold;
  color: #e9e9d6;
  background-color: #1e282c;
  padding: 0.6em 1em;
}
figure.highlight figcaption a {
  position: absolute;
  right: 1rem;
}
figure.highlight figcaption:before {
  content: "\f121";
  font-family: "fontawesome";
  text-align: center;
  display: inline-block;
  margin-right: 0.6em;
}
figure.highlight pre {
  background: 0 0;
  border: none;
  margin: 0;
  padding: 0.5rem;
}
figure.highlight table {
  border-spacing: 0;
  margin: 0;
}
figure.highlight th {
  border: 0;
  font-weight: 400;
  padding: 0;
}
figure.highlight td {
  border: 0;
  font-size: 1.1rem;
  padding: 0;
}
.entry-content .toc {
  background: #fff;
  padding: 0.5rem;
  margin: 3rem 0;
  border: 1px solid #cce4e8;
  border-radius: 2px;
}
.entry-content .toc ul {
  margin-bottom: 0;
  padding: 0;
  margin: 0;
  border-top: 1px solid #5d8b93;
  border-radius: 2px;
}
.entry-content .toc ul:first-child {
  border-top: none;
}
.entry-content .toc ul ul,
.entry-content .toc ul ol {
  margin-bottom: 0;
  padding: 0;
  margin: 0;
}
.entry-content .toc ul li {
  padding: 0;
  margin: 0;
  border-top: 1px solid #5d8b93;
}
.entry-content .toc ul li:first-child {
  border-top: none;
}
.entry-content .toc ul li::after,
.entry-content .toc ul li::before {
  content: normal;
}
.entry-content .toc ul li a {
  font-size: 1.2rem;
  font-weight: bold;
  display: block;
  padding: 1rem;
  background-color: #3d5b61;
  color: #fff;
  -webkit-transition: 0.3s;
  -ms-transition: 0.3s;
  -moz-transition: 0.3s;
  -o-transition: 0.3s;
  -webkit-transition: 0.3s;
  -moz-transition: 0.3s;
  -o-transition: 0.3s;
  -ms-transition: 0.3s;
  transition: 0.3s;
}
.entry-content .toc ul li a:hover {
  color: #fff;
  background-color: #2c4145;
}
.entry-content .toc ul li a:before {
  content: "\f02d";
  font-family: "fontawesome";
  display: inline-block;
  padding: 0;
  margin: 0;
  margin-right: 0.8rem;
}
.entry-content .toc ul li ul,
.entry-content .toc ul li ol {
  margin-bottom: 0;
  padding: 0;
  margin: 0;
}
.entry-content .toc ul li ul li a,
.entry-content .toc ul li ol li a {
  padding: 0.5rem 0.75rem 0.5rem 2rem;
  font-size: 0.9rem;
  background-color: #416167;
}
.entry-content .toc ul li ul li a:before,
.entry-content .toc ul li ol li a:before {
  content: "\f0da";
  font-family: "fontawesome";
  display: inline-block;
  padding: 0;
  margin: 0;
  margin-right: 0.6rem;
}
.entry-content .toc ul li ul li ul li a,
.entry-content .toc ul li ol li ul li a {
  padding: 0.5rem 0.75rem 0.5rem 4rem;
}
.entry-content .toc ul li ul li ul li a:before,
.entry-content .toc ul li ol li ul li a:before {
  content: none;
}
.meta-content {
  background-color: #fff;
  margin: 1.5rem 0.8rem;
  padding: 0;
  border-top: 1px dotted #cce4e8;
  letter-spacing: 0.05rem;
}
.meta-wrapper {
  margin: 3rem 0.8rem;
  padding: 0;
  background-color: #fff;
}
h6.tag,
h6.categories {
  color: #2d3d40;
  font-size: 0.9rem;
  font-weight: bold;
}
.article-tag-list {
  padding: 0;
}
.article-tag,
.article-tag-list,
.article-categories,
.article-categories-list {
  padding: 0;
  margin: 0;
}
.article-categories {
  margin-bottom: 1.6em;
}
.article-tag-list li,
.article-categories-list li {
  list-style: none;
  display: inline-block;
  padding: 0;
  margin: 0.2rem 0.1rem;
}
.article-tag-list li a,
.article-categories-list li a {
  font-size: 0.8rem;
  font-weight: bold;
  padding: 0.4rem 0.8rem;
  margin: 0;
  background-color: #ecf5f7;
  color: #2d3d40;
  border-radius: 2px;
  display: block;
}
.article-tag-list li a:before,
.article-categories-list li a:before {
  content: "#";
}
.article-tag-list li a:hover,
.article-categories-list li a:hover {
  color: #fff;
  background-color: #2d3d40;
}
.widget {
  margin: 1.5rem 0.8rem;
  padding: 0;
}
.widget-h {
  text-align: center;
  margin: 1.6rem 0;
}
.widget-h h6 {
  color: #fff;
  background-color: #2d3d40;
  display: inline-block;
  padding: 0.4rem 1rem;
  font-size: 0.9rem;
  font-weight: bold;
}
.posts-list li {
  list-style: none;
  margin: 0.8rem 0;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-align-items: center;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}
.posts-list li .posts-list-link {
  -webkit-flex-grow: 3;
  -webkit-box-flex: 3;
  -moz-box-flex: 3;
  -o-box-flex: 3;
  -ms-box-flex: 3;
  box-flex: 3;
  -webkit-flex-grow: 3;
  flex-grow: 3;
}
.posts-list li .posts-list-link a {
  color: #2d3d40;
  font-size: 1.1rem;
  font-weight: bold;
}
.posts-list li .posts-list-link a:hover {
  color: #e91e63;
}
.posts-list li .posts-list-meta {
  font-size: 0.7rem;
}
.posts-list li .flx:first-child {
  margin: 0 1rem 0 0;
}
.posts-list li amp-img {
  border-radius: 2px;
}
#footer {
  background-color: #2d3d40;
  color: #fff;
  display: block;
  font-size: 1rem;
  letter-spacing: 0.05rem;
  line-height: 2rem;
  margin: 3rem 0 0 0;
  padding: 0;
}
.site-author-info {
  margin: 0;
  padding: 3rem 1.6rem;
}
.site-author-info h6 {
  font-size: 1rem;
  color: #fff;
  font-weight: bold;
  display: inline-block;
  background-color: #222f31;
  padding: 0.4rem 0.8rem;
}
.site-author-info-wrapper {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-align-items: center;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}
.site-author-info-wrapper .flx:first-child {
  margin: 0 1rem 0 0;
}
.authorCap-wrapper {
  -webkit-flex-grow: 3;
  -webkit-box-flex: 3;
  -moz-box-flex: 3;
  -o-box-flex: 3;
  -ms-box-flex: 3;
  box-flex: 3;
  -webkit-flex-grow: 3;
  flex-grow: 3;
}
.authorCap {
  font-size: 1.4rem;
  font-weight: bold;
}
.authorReading {
  font-size: 0.7rem;
}
.site-author-desc {
  font-size: 0.8rem;
  line-height: 1.6rem;
  margin: 1.4rem 0;
}
.copyright-tool {
  margin: 0;
  padding: 1.5rem 1.6rem;
  border-top: 1px solid #384b4f;
}
.copyright-notice p {
  font-size: 0.6rem;
  letter-spacing: 0.05rem;
  line-height: 1.2rem;
  color: #8ba8ae;
}
.copyright-title {
  font-size: 1rem;
  text-align: center;
  margin: 0.8rem 0 0.4rem 0;
}
.copyright-license {
  margin: 0.4rem 0 0.8rem 0;
  font-size: 0.7rem;
  text-align: center;
}
.copyright-license a {
  color: #e6e6e6;
  font-size: 0.7rem;
}
.copyright-license a:hover {
  color: #b3b3b3;
}
.sns-link {
  margin: 0;
  text-align: center;
}
.sns-link a {
  display: inline-block;
  font-size: 1.6rem;
  text-align: center;
  width: 2rem;
  height: 2rem;
  line-height: 2rem;
  padding: 0.6rem;
  margin: 0 0.1rem;
  background-color: #222f31;
  color: #fff;
  border-radius: 4px;
}
.sns-link a:hover {
  color: #ccc;
  background-color: #030404;
}
.footer-menu {
  padding: 1.5rem 0.8rem;
  border-top: 1px solid #384b4f;
}
.footer-menu ul li {
  list-style: none;
  margin: 0;
  padding: 0;
}
.footer-menu ul li a {
  display: block;
  padding: 0.6rem;
  margin: 0.2rem 1.6rem;
  font-size: 1rem;
  color: #fff;
  background-color: #222f31;
  border-radius: 4px;
  text-align: center;
  font-weight: bold;
}
.footer-menu ul li a:hover {
  color: #ccc;
  background-color: #030404;
}
.social-share {
  margin: 1.5rem 0.8rem;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
}
.social-share amp-social-share,
.social-share .sbtn {
  margin: 5px;
}
.sbtn {
  padding: 0;
  width: 4rem;
  height: 3rem;
  line-height: 3rem;
  color: #fff;
  font-size: 1.2rem;
  text-align: center;
  border-radius: 4px;
}
.sbtn:hover {
  color: #fff;
}
.tw {
  background-color: #1cafe8;
}
.tw:hover {
  background-color: #0f6b8f;
}
.fb {
  background-color: #4f677f;
}
.fb:hover {
  background-color: #283440;
}
.ht {
  background-color: #35acda;
}
.ht:hover {
  background-color: #1a6e8f;
}
.gp {
  background-color: #d56153;
}
.gp:hover {
  background-color: #9c3326;
}
.tb {
  background-color: #465f79;
}
.tb:hover {
  background-color: #212c38;
}
.icon-hatena:before {
  content: "B";
  font-weight: bold;
  font-size: 1.2rem;
}
#totop {
  position: fixed;
  bottom: 2rem;
  right: 1.6rem;
  font-size: 1.2rem;
  z-index: 995;
}
#totop a {
  background: rgba(152,184,190,0.6);
  text-decoration: none;
  color: #fff;
  padding: 0.8rem;
  border-radius: 50%;
}
#totop a:before {
  content: "\f062";
  font-family: "fontawesome";
  font-size: 1.2rem;
}
#totop a:hover {
  text-decoration: none;
  background: #5d8b93;
  color: #fff;
  line-height: 2.3em;
}
@media (min-width: 800px) {
  .title-cover,
  .entry-content,
  .categories,
  .meta-content,
  .site-author-info {
    width: 780px;
    margin: 0 auto;
  }
  .nav-container {
    width: 800px;
    margin: 0 auto;
  }
}
@media (min-width: 0px) and (max-width: 480px) {
  .site-author-info-wrapper {
    display: block;
  }
  .gravatar-area {
    text-align: center;
  }
  .gravatar-area amp-img {
    display: inline-block;
  }
  .entry-content td,
  .entry-content th {
    line-height: 1.8em;
    padding: 0.6rem 0.6rem;
    font-size: 0.5rem;
  }
  .entry-content td em,
  .entry-content th em,
  .entry-content td strong,
  .entry-content th strong,
  .entry-content td a,
  .entry-content th a {
    font-size: 0.5rem;
  }
}
#hexo-amp-id-1{font-size: 4em;}
	</style>
	
  </head>
  <body>
  	
  	
  	<!-- google analytics -->
  	
  	
  	
  	<!-- menu -->
  	<header>
  		<div class="nav-container">
	  		<div class="left-nav">
	  			<div class="header-title">
	  				<a href="/">Today&#39;s Commit</a>
	  			</div>
	  		</div>
	  		
	  	</div>
    </header>
  	
  	
  	<!-- sidebar -->
  	
  	
  	<!-- container -->
  	<div id="container">
	  	<div id="main">
		    <article id="post-0034-all-becomes-reduce-5" class="post">
		    
		   		<!-- categories and bread crumb -->
		    	
		    
		    	<!-- entry title -->
				<div class="title-cover">
					<div class="entry-header">
						
						
						
			          	<div class="header-thumb flx">
			          		<div class="thumbImg-w circle">
			          			<amp-img class="thumbImg" layout="fixed" width="128" height="100" src="/amp-dist/sample/sample-substituteTitleImage.png">
			          			</amp-img>
			          		</div>
			          	</div>
			            
			            
			            <div class="header-cap flx">
							
							  <h1 class="article-title entry-title" itemprop="name">
							    <a href="https://t-kojima.github.io/2018/07/28/0034-all-becomes-reduce-5/" target="_blank" itemprop="url">全てがReduceになる(5)</a>
							  </h1>
							
						</div>
					</div>
					
					<!-- datePublished -->
					<div class="entry-meta-header">
						<span class="meta-elements date">
							<span class="fa fa-fw fa-clock-o"></span>
							<time datetime="2018-07-28" itemprop="datePublished">2018.07.27</time>
						</span>
					</div>
				</div>
				
				
				
				<!-- entry content -->
			    <div class="entry-content ecp">
			    	<!-- social share button -->
			    	
			    	
			    	
                    <!-- google Adsense Matched content -->
                    
                    
			    	<!-- content -->
			  		<p><a href="https://t-kojima.github.io/2018/07/26/0033-all-becomes-reduce-4/">&#x524D;&#x56DE;</a>&#x306B;&#x7D9A;&#x304D;&#x3001;Array &#x306E;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3092; reduce &#x3067;&#x518D;&#x5B9F;&#x88C5;&#x3059;&#x308B;&#x3002;</p>
<p>&#x4ECA;&#x56DE;&#x306F; Node &#x306B;&#x304A;&#x3051;&#x308B; Array#sort &#x306E;&#x30A2;&#x30EB;&#x30B4;&#x30EA;&#x30BA;&#x30E0;&#x306E;&#x89E3;&#x660E;&#x3067;&#x975E;&#x5E38;&#x306B;&#x9577;&#x3044;&#x5185;&#x5BB9;&#x306B;&#x306A;&#x3063;&#x3066;&#x3057;&#x307E;&#x3063;&#x305F;&#x3002;&#x306A;&#x306E;&#x3067; sort &#x306E;&#x307F;&#x3067;&#x3059;&#x3002;</p>
<ul>
<li>sort</li>
</ul>
<p><a href="https://github.com/t-kojima/practice-all-becomes-reduce" target="_blank" rel="noopener">&#x5B9F;&#x88C5;&#x53CA;&#x3073;&#x30C6;&#x30B9;&#x30C8;&#x306E;&#x30EA;&#x30DD;&#x30B8;&#x30C8;&#x30EA;(practice-all-becomes-reduce)</a></p>
<a id="more"></a>
<h1><span id="&#x30EB;&#x30FC;&#x30EB;">&#x30EB;&#x30FC;&#x30EB;</span></h1><p>&#x5F15;&#x304D;&#x7D9A;&#x304D;&#x4EE5;&#x4E0B;&#x306E;&#x30EB;&#x30FC;&#x30EB;&#x3067;&#x3084;&#x3063;&#x3066;&#x3044;&#x304F;&#x3002;</p>
<ul>
<li>for &#x6587;&#x7981;&#x6B62;</li>
<li>Array#reduce &#x3092;&#x5FC5;&#x305A;&#x4F7F;&#x7528;&#x3059;&#x308B;</li>
<li>Array &#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306F; reduce &#x4EE5;&#x5916;&#x4F7F;&#x7528;&#x4E0D;&#x53EF;</li>
<li>Array &#x306E;&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x3001;&#x30AF;&#x30E9;&#x30B9;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306F;&#x4F7F;&#x7528;&#x53EF;&#x80FD;</li>
<li>&#x30B9;&#x30D7;&#x30EC;&#x30C3;&#x30C9;&#x69CB;&#x6587;&#x306F;&#x4F7F;&#x7528;&#x4E0D;&#x53EF;&#xFF08;reduce &#x3059;&#x3089;&#x4E0D;&#x8981;&#x306B;&#x306A;&#x308B;&#x5834;&#x5408;&#x304C;&#x3042;&#x308B;&#x304B;&#x3089;&#xFF09;</li>
</ul>
<hr>
<h1 id="hexo-amp-id-1"><span id="sort">sort</span></h1>

<p><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/sort" target="_blank" rel="noopener">Array.prototype.sort() - JavaScript | MDN</a></p>
<p>sort &#x306A;&#x306E;&#x3067;&#x5F53;&#x7136;&#x914D;&#x5217;&#x306E;&#x4E26;&#x3073;&#x66FF;&#x3048;&#x3092;&#x884C;&#x3046;&#x3002;&#x305F;&#x3060;&#x3057;&#x3053;&#x306E; sort &#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306F;&#x975E;&#x5E38;&#x306B;&#x30AF;&#x30BB;&#x304C;&#x3042;&#x308B;&#x3002;&#xFF08;&#x5F8C;&#x8FF0;&#xFF09;</p>
<h2><span id="&#x69CB;&#x6587;">&#x69CB;&#x6587;</span></h2><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">arr.sort([compareFunction])</span><br></pre></td></tr></tbody></table></figure>
<p>sort &#x306F;&#x30BD;&#x30FC;&#x30C8;&#x3055;&#x308C;&#x305F;&#x914D;&#x5217;&#x3092;&#x623B;&#x308A;&#x5024;&#x3068;&#x3057;&#x3066;&#x8FD4;&#x3059;&#x304C;&#x3001;&#x30EC;&#x30B7;&#x30FC;&#x30D0;&#x3068;&#x306A;&#x308B;&#x914D;&#x5217;&#x3092;&#x7834;&#x58CA;&#x7684;&#x306B;&#x30BD;&#x30FC;&#x30C8;&#x3059;&#x308B;&#x3002;</p>
<p>compareFunction &#x3092;&#x6307;&#x5B9A;&#x3057;&#x305F;&#x5834;&#x5408;&#x3001;&#x305D;&#x306E;&#x95A2;&#x6570;&#x306E;&#x7D50;&#x679C;&#x306B;&#x57FA;&#x3065;&#x3044;&#x305F;&#x30BD;&#x30FC;&#x30C8;&#x3092;&#x884C;&#x3044;&#x3001;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;&#x306F;&#x5404;&#x8981;&#x7D20;&#x3092;&#x6587;&#x5B57;&#x5217;&#x6BD4;&#x8F03;&#x3057;&#x305F;&#x7D50;&#x679C;&#x306B;&#x57FA;&#x3065;&#x304D;&#x3001;&#x8F9E;&#x66F8;&#x9806;&#x6B21;&#x30BD;&#x30FC;&#x30C8;&#x3059;&#x308B;&#x3002;</p>
<h2><span id="&#x518D;&#x5B9F;&#x88C5;">&#x518D;&#x5B9F;&#x88C5;</span></h2><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> concat = <span class="function">(<span class="params">...args</span>) =&gt;</span></span><br><span class="line">  args.reduce(<span class="function">(<span class="params">acc, array</span>) =&gt;</span> {</span><br><span class="line">    <span class="built_in">Array</span>.from(array).reduce(<span class="function">(<span class="params">_, cur, index</span>) =&gt;</span> {</span><br><span class="line">      <span class="keyword">if</span> (index <span class="keyword">in</span> array) {</span><br><span class="line">        acc[acc.length] = array[index]</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        acc.length += <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">    }, <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span> acc</span><br><span class="line">  }, [])</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> push = <span class="function">(<span class="params"><span class="keyword">from</span>, to, index</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">if</span> (index <span class="keyword">in</span> <span class="keyword">from</span>) {</span><br><span class="line">    to[to.length] = <span class="keyword">from</span>[index]</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    to.length += <span class="number">1</span></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> quickSort = <span class="function">(<span class="params">array, compare</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">if</span> (array.length &lt; <span class="number">1</span>) <span class="keyword">return</span> array</span><br><span class="line">  <span class="comment">// &#x5F8C;&#x3067;concat&#x3059;&#x308B;&#x70BA;&#x914D;&#x5217;&#x3067;&#x4FDD;&#x6301;</span></span><br><span class="line">  <span class="keyword">const</span> pivot = <span class="number">0</span> <span class="keyword">in</span> array ? [array[<span class="number">0</span>]] : [,]</span><br><span class="line">  <span class="keyword">const</span> [left, right] = <span class="built_in">Array</span>.from(array).reduce(</span><br><span class="line">    (acc, cur, index) =&gt; {</span><br><span class="line">      <span class="keyword">if</span> (index !== <span class="number">0</span>) {</span><br><span class="line">        <span class="comment">// &#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x6709; &amp; compare&#x304C;0&#x4EE5;&#x4E0B;&#x306A;&#x3089;right</span></span><br><span class="line">        <span class="keyword">const</span> idx =</span><br><span class="line">          <span class="number">0</span> <span class="keyword">in</span> pivot &amp;&amp; compare.call(<span class="literal">undefined</span>, pivot[<span class="number">0</span>], array[index]) &lt;= <span class="number">0</span></span><br><span class="line">        push(array, acc[<span class="built_in">Number</span>(idx)], index)</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">return</span> acc</span><br><span class="line">    },</span><br><span class="line">    [[], []] <span class="comment">// [[left], [right]] &#x3092;&#x8FD4;&#x3059;</span></span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">return</span> concat(quickSort(left, compare), pivot, quickSort(right, compare))</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.sort = <span class="function"><span class="keyword">function</span>(<span class="params">compare</span>) </span>{</span><br><span class="line">  <span class="keyword">const</span> sorted = quickSort(<span class="keyword">this</span>, (x, y) =&gt; {</span><br><span class="line">    <span class="keyword">if</span> (x === <span class="literal">undefined</span> || y === <span class="literal">undefined</span>) {</span><br><span class="line">      <span class="keyword">return</span> (x === <span class="literal">undefined</span> ? <span class="number">1</span> : <span class="number">0</span>) + (y === <span class="literal">undefined</span> ? <span class="number">-1</span> : <span class="number">0</span>)</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (compare) {</span><br><span class="line">      <span class="keyword">const</span> v = <span class="built_in">Number</span>(compare.call(<span class="literal">undefined</span>, x, y))</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Number</span>.isNaN(v) ? <span class="number">0</span> : v</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">String</span>(x) &gt; <span class="built_in">String</span>(y) ? <span class="number">1</span> : <span class="number">0</span>) + (<span class="built_in">String</span>(x) &lt; <span class="built_in">String</span>(y) ? <span class="number">-1</span> : <span class="number">0</span>)</span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.length = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(sorted).reduce(<span class="function">(<span class="params">acc, cur, index</span>) =&gt;</span> {</span><br><span class="line">    push(sorted, acc, index)</span><br><span class="line">    <span class="keyword">return</span> acc</span><br><span class="line">  }, <span class="keyword">this</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>&#x307E;&#x305A;&#x3044;&#x304D;&#x306A;&#x308A;&#x3060;&#x304C;&#x3001;&#x914D;&#x5217;&#x3092;&#x30BD;&#x30FC;&#x30C8;&#x3059;&#x308B;&#x3002;</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> sorted = quickSort(<span class="keyword">this</span>, (x, y) =&gt; {</span><br><span class="line">  <span class="keyword">if</span> (x === <span class="literal">undefined</span> || y === <span class="literal">undefined</span>) {</span><br><span class="line">    <span class="keyword">return</span> (x === <span class="literal">undefined</span> ? <span class="number">1</span> : <span class="number">0</span>) + (y === <span class="literal">undefined</span> ? <span class="number">-1</span> : <span class="number">0</span>)</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> (compare) {</span><br><span class="line">    <span class="keyword">const</span> v = <span class="built_in">Number</span>(compare.call(<span class="literal">undefined</span>, x, y))</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Number</span>.isNaN(v) ? <span class="number">0</span> : v</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> (<span class="built_in">String</span>(x) &gt; <span class="built_in">String</span>(y) ? <span class="number">1</span> : <span class="number">0</span>) + (<span class="built_in">String</span>(x) &lt; <span class="built_in">String</span>(y) ? <span class="number">-1</span> : <span class="number">0</span>)</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>
<p>&#x30BD;&#x30FC;&#x30C8;&#x306B;&#x306F;&#x30AF;&#x30A4;&#x30C3;&#x30AF;&#x30BD;&#x30FC;&#x30C8;&#x3092;&#x4F7F;&#x3046;&#x3002;<br><code>quickSort</code> &#x95A2;&#x6570;&#x306F;&#x540D;&#x524D;&#x306E;&#x901A;&#x308A;&#x30AF;&#x30A4;&#x30C3;&#x30AF;&#x30BD;&#x30FC;&#x30C8;&#x3092;&#x884C;&#x3046;&#x95A2;&#x6570;&#x3067;&#x3001;&#x7B2C;&#x4E00;&#x5F15;&#x6570;&#x306B;&#x30BD;&#x30FC;&#x30C8;&#x5BFE;&#x8C61;&#x306E;&#x914D;&#x5217;&#x3001;&#x7B2C;&#x4E8C;&#x5F15;&#x6570;&#x306B;&#x306F; callback &#x3092;&#x6E21;&#x3059;&#x3002;&#x3053;&#x306E;&#x6642; quickSort &#x306B;&#x6E21;&#x3059; callback &#x306F;&#x6BD4;&#x8F03;&#x95A2;&#x6570;&#x3067;&#x3042;&#x308B; compareFunction &#x3092;&#x6E21;&#x3059;&#x306E;&#x3060;&#x304C;&#x3001; sort &#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306E;&#x5F15;&#x6570;&#x3067;&#x3042;&#x308B; compareFunction &#x3092;&#x305D;&#x306E;&#x307E;&#x307E;&#x6E21;&#x3059;&#x306E;&#x3067;&#x306F;&#x306A;&#x304F;&#x3001; undefined &#x306E;&#x5834;&#x5408;&#x3084; compareFunction &#x304C;&#x672A;&#x5B9A;&#x7FA9;&#x306E;&#x5834;&#x5408;&#x306E;&#x6BD4;&#x8F03;&#x51E6;&#x7406;&#x3092;&#x8FFD;&#x52A0;&#x3057;&#x305F;&#x95A2;&#x6570;&#x3067;&#x30E9;&#x30C3;&#x30D7;&#x3057;&#x3066;&#x3044;&#x308B;&#x3002;&#xFF08;&#x4ED5;&#x69D8;&#x306B;&#x3042;&#x308B;&#x201D;&#x6587;&#x5B57;&#x5217;&#x3067;&#x6BD4;&#x8F03;&#x3057;&#x8F9E;&#x66F8;&#x9806;&#x306B;&#x30BD;&#x30FC;&#x30C8;&#x201D;&#x306E;&#x90E8;&#x5206;&#x3067;&#x3042;&#x308B;&#xFF09;</p>
<p>&#x3053;&#x308C;&#x306F; ECMAScript &#x4ED5;&#x69D8;&#x66F8;&#x306E;<a href="https://www.ecma-international.org/ecma-262/6.0/#sec-sortcompare" target="_blank" rel="noopener">Runtime Semantics: SortCompare(x,y)</a>&#x306B;&#x3042;&#x308B;&#x624B;&#x9806;&#x3092;&#x305D;&#x306E;&#x307E;&#x307E;&#x5B9F;&#x88C5;&#x3057;&#x3066;&#x3044;&#x308B;&#x3002;</p>
<p>&#x30AF;&#x30A4;&#x30C3;&#x30AF;&#x30BD;&#x30FC;&#x30C8;&#x90E8;&#x5206;&#x306F;<a href="https://www.codereading.com/algo_and_ds/algo/quick_sort.html" target="_blank" rel="noopener">&#x30AF;&#x30A4;&#x30C3;&#x30AF;&#x30BD;&#x30FC;&#x30C8; : &#x30A2;&#x30EB;&#x30B4;&#x30EA;&#x30BA;&#x30E0;</a>&#x3092;&#x53C2;&#x8003;&#x306B;&#x3055;&#x305B;&#x3066;&#x9802;&#x3044;&#x3066;&#x3001;&#x4EE5;&#x4E0B;&#x306E;&#x3088;&#x3046;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x3002;</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> quickSort = <span class="function">(<span class="params">array, compare</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">if</span> (array.length &lt; <span class="number">1</span>) <span class="keyword">return</span> array</span><br><span class="line">  <span class="comment">// &#x5F8C;&#x3067;concat&#x3059;&#x308B;&#x70BA;&#x914D;&#x5217;&#x3067;&#x4FDD;&#x6301;</span></span><br><span class="line">  <span class="keyword">const</span> pivot = <span class="number">0</span> <span class="keyword">in</span> array ? [array[<span class="number">0</span>]] : [,]</span><br><span class="line">  <span class="keyword">const</span> [left, right] = <span class="built_in">Array</span>.from(array).reduce(</span><br><span class="line">    (acc, cur, index) =&gt; {</span><br><span class="line">      <span class="keyword">if</span> (index !== <span class="number">0</span>) {</span><br><span class="line">        <span class="comment">// &#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x6709; &amp; compare&#x304C;0&#x4EE5;&#x4E0B;&#x306A;&#x3089;right</span></span><br><span class="line">        <span class="keyword">const</span> idx =</span><br><span class="line">          <span class="number">0</span> <span class="keyword">in</span> pivot &amp;&amp; compare.call(<span class="literal">undefined</span>, pivot[<span class="number">0</span>], array[index]) &lt;= <span class="number">0</span></span><br><span class="line">        push(array, acc[<span class="built_in">Number</span>(idx)], index)</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">return</span> acc</span><br><span class="line">    },</span><br><span class="line">    [[], []] <span class="comment">// [[left], [right]] &#x3092;&#x8FD4;&#x3059;</span></span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">return</span> concat(quickSort(left, compare), pivot, quickSort(right, compare))</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>&#x914D;&#x5217;&#x306E;&#x5148;&#x982D;&#x8981;&#x7D20;&#x3092; pivot &#x3068;&#x3057;&#x3066;&#x53D6;&#x308A;&#x51FA;&#x3057;&#x3001;&#x4ED6;&#x306E;&#x8981;&#x7D20;&#x3068; compare &#x95A2;&#x6570;&#x3067;&#x6BD4;&#x8F03;&#x3057;&#x3001;left &#x3068; right &#x306B;&#x5272;&#x308A;&#x632F;&#x3063;&#x3066;&#x3044;&#x304F;&#x3002;&#x305D;&#x306E;&#x5F8C; left &#x3068; right &#x914D;&#x5217;&#x306F;&#x518D;&#x5E30;&#x7684;&#x306B;&#x30AF;&#x30A4;&#x30C3;&#x30AF;&#x30BD;&#x30FC;&#x30C8;&#x3092;&#x7E70;&#x308A;&#x8FD4;&#x3057;&#x3001;&#x6700;&#x7D42;&#x7684;&#x306B; left+pivot+right &#x3067;&#x914D;&#x5217;&#x3092;&#x7D50;&#x5408;&#x3059;&#x308B;&#x5F62;&#x306B;&#x306A;&#x308B;&#x3002;</p>
<p>concat &#x306F;&#x5358;&#x7D14;&#x306B;&#x914D;&#x5217;&#x3092;&#x7D50;&#x5408;&#x3059;&#x308B;&#x95A2;&#x6570;&#x3001;push &#x306F;&#x914D;&#x5217;&#x306B;&#x8981;&#x7D20;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;&#x95A2;&#x6570;&#x3060;&#x3002;concat &#x306F;&#x914D;&#x5217;&#x540C;&#x58EB;&#x3057;&#x304B;&#x7D50;&#x5408;&#x3067;&#x304D;&#x306A;&#x3044;&#x3088;&#x3046;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;pivot &#x306F;&#x914D;&#x5217;&#x3067;&#x4FDD;&#x6301;&#x3057;&#x3066;&#x3044;&#x308B;&#x3002;</p>
<p>&#x307E;&#x305F;&#x3001;&#x758E;&#x306A;&#x914D;&#x5217;&#x3067;&#x3042;&#x3063;&#x3066;&#x3082;&#x30BD;&#x30FC;&#x30C8;&#x3067;&#x304D;&#x308B;&#x3088;&#x3046;&#x306B;&#x3057;&#x3066;&#x3044;&#x3066;&#x3001;pivot &#x304C;&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x306E;&#x7121;&#x3044;&#x8981;&#x7D20;&#xFF08;&#x758E;&#x8981;&#x7D20;&#xFF09;&#x306A;&#x3089;&#x3070;&#x3001;&#x4ED6;&#x306E;&#x8981;&#x7D20;&#x306F;&#x7121;&#x6761;&#x4EF6;&#x3067; left&#xFF08;&#x5148;&#x982D;&#x5074;&#xFF09;&#x306B;&#x30BD;&#x30FC;&#x30C8;&#x3059;&#x308B;&#x3088;&#x3046;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x3002;&#x3053;&#x308C;&#x306B;&#x3088;&#x308A;&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x306E;&#x7121;&#x3044;&#x8981;&#x7D20;&#xFF08;&#x758E;&#x8981;&#x7D20;&#xFF09;&#x306F; compare &#x306E;&#x7D50;&#x679C;&#x306B;&#x304B;&#x304B;&#x308F;&#x3089;&#x305A;&#x5168;&#x3066;&#x914D;&#x5217;&#x306E;&#x672B;&#x5C3E;&#x5074;&#x306B;&#x307E;&#x3068;&#x3081;&#x3089;&#x308C;&#x308B;&#x3002;</p>
<p>&#x3053;&#x306E;&#x4ED5;&#x69D8;&#x3082;<a href="https://www.ecma-international.org/ecma-262/6.0/#sec-sortcompare" target="_blank" rel="noopener">Runtime Semantics: SortCompare(x,y)</a>&#x306E; NOTE1 &#x306B;&#x8A18;&#x8F09;&#x304C;&#x3042;&#x308B;&#x3002;</p>
<blockquote>
<p>Because non-existent property values always compare greater than undefined property values, and undefined always compares greater than any other value, undefined property values always sort to the end of the result, followed by non-existent property values.</p>
</blockquote>
<h2><span id="&#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;&#x306E;-sort-&#x3068;&#x7D50;&#x679C;&#x304C;&#x7570;&#x306A;&#x308B;&#x554F;&#x984C;">&#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;&#x306E; sort &#x3068;&#x7D50;&#x679C;&#x304C;&#x7570;&#x306A;&#x308B;&#x554F;&#x984C;</span></h2><p>&#x5927;&#x554F;&#x984C;&#x306A;&#x308F;&#x3051;&#x3067;&#x3001;&#x50D5;&#x306E;&#x30BD;&#x30FC;&#x30C8;&#x5B9F;&#x88C5;&#x304C;&#x9593;&#x9055;&#x3063;&#x3066;&#x308B;&#x306B;&#x7B49;&#x3057;&#x3044;&#x308F;&#x3051;&#x3067;</p>
<p>&#x5177;&#x4F53;&#x7684;&#x306B;&#x306F;&#x4EE5;&#x4E0B;&#x306E;&#x914D;&#x5217;&#x3092;&#x306B;&#x6BD4;&#x8F03;&#x95A2;&#x6570;&#x6709;&#x308A;&#x3067;&#x30BD;&#x30FC;&#x30C8;&#x3057;&#x305F;&#x6642;&#x306B;&#x7D50;&#x679C;&#x304C;&#x7570;&#x306A;&#x308B;&#x3002;&#xFF08;<code>&#x203B;&#x4EE5;&#x964D;&#x3001;node&#x7D44;&#x307F;&#x8FBC;&#x307F;&#x306E;sort&#x3092;&#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;&#x3001;&#x81EA;&#x4F5C;&#x306E;sort&#x3092;&#x30EA;&#x30E1;&#x30A4;&#x30AF;&#x3068;&#x547C;&#x3076;</code>&#xFF09;</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="number">1</span>, <span class="literal">undefined</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">null</span>]</span><br></pre></td></tr></tbody></table></figure>
<p>&#x6BD4;&#x8F03;&#x95A2;&#x6570;&#x7121;&#x3057;&#x306E;&#x5834;&#x5408;&#x306F;&#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;&#x3082;&#x30EA;&#x30E1;&#x30A4;&#x30AF;&#x3082;&#x540C;&#x3058;&#x7D50;&#x679C;&#x3092;&#x8FD4;&#x3059;&#x3002;</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">&gt; array = [<span class="number">1</span>, <span class="literal">undefined</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">null</span>];</span><br><span class="line">&gt; array.sort();</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="literal">null</span>, <span class="string">&apos;z&apos;</span>, <span class="literal">undefined</span>]</span><br></pre></td></tr></tbody></table></figure>
<p>&#x3057;&#x304B;&#x3057; <code>(x, y) =&gt; x - y</code> &#x3068;&#x3044;&#x3046;&#x6BD4;&#x8F03;&#x95A2;&#x6570;&#x3092;&#x4E0E;&#x3048;&#x308B;&#x3068;&#x7570;&#x306A;&#x308B;&#x7D50;&#x679C;&#x3092;&#x8FD4;&#x3057;&#x3066;&#x3057;&#x307E;&#x3046;&#x3002;</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// &#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;</span></span><br><span class="line">&gt; array = [<span class="number">1</span>, <span class="literal">undefined</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">null</span>];</span><br><span class="line">&gt; array.sort(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x - y);</span><br><span class="line">[<span class="literal">null</span>, <span class="number">1</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">undefined</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x30EA;&#x30E1;&#x30A4;&#x30AF;</span></span><br><span class="line">&gt; array = [<span class="number">1</span>, <span class="literal">undefined</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">null</span>];</span><br><span class="line">&gt; array.sort(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x - y);</span><br><span class="line">[<span class="number">0</span>, <span class="literal">null</span>, <span class="number">1</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="literal">undefined</span>]</span><br></pre></td></tr></tbody></table></figure>
<p>&#x4E0A;&#x8A18;&#x306E;&#x901A;&#x308A;&#x3001;0 &#x306E;&#x4F4D;&#x7F6E;&#x304C;&#x7570;&#x306A;&#x308B;&#x3002;</p>
<h3><span id="nodejsv8-&#x306E;&#x30BD;&#x30FC;&#x30B9;&#x3092;&#x898B;&#x3066;&#x307F;&#x308B;">Node.js(v8) &#x306E;&#x30BD;&#x30FC;&#x30B9;&#x3092;&#x898B;&#x3066;&#x307F;&#x308B;&#x3002;</span></h3><p><a href="https://github.com/v8/v8/blob/676501a8d7e208e16356027925b2ee60bd4fbc9c/src/js/array.js#L645" target="_blank" rel="noopener">v8/array.js at master &#xB7; v8/v8</a></p>
<p>Node.js &#x306F; v8 &#x3092;&#x4F7F;&#x7528;&#x3057;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;sort &#x306E;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x78BA;&#x8A8D;&#x3057;&#x3066;&#x307F;&#x308B;&#x3002;&#xFF08;&#x5834;&#x6240;&#x306F;&#x4E0A;&#x8A18;&#x306E;&#x7B87;&#x6240;&#x3067;&#x826F;&#x3044;&#x30CF;&#x30BA;&#x2026;&#xFF09;</p>
<p>&#x3044;&#x304D;&#x306A;&#x308A;&#x5927;&#x4E8B;&#x306A;&#x3053;&#x3068;&#x304C;&#x66F8;&#x3044;&#x3066;&#x3042;&#x308B;&#x3002;&#x30BD;&#x30FC;&#x30C8;&#x30A2;&#x30EB;&#x30B4;&#x30EA;&#x30BA;&#x30E0;&#x306F;&#x30AF;&#x30A4;&#x30C3;&#x30AF;&#x30BD;&#x30FC;&#x30C8;&#x3092;&#x4F7F;&#x7528;&#x3057;&#x3066;&#x3044;&#x308B;&#x304C;&#x3001;&#x914D;&#x5217;&#x9577;&#x304C; 10 &#x4EE5;&#x4E0B;&#x306E;&#x5834;&#x5408;&#x306F;&#x633F;&#x5165;&#x30BD;&#x30FC;&#x30C8;&#x3092;&#x4F7F;&#x7528;&#x3057;&#x3066;&#x3044;&#x308B;&#x3089;&#x3057;&#x3044;&#x3002;</p>
<blockquote>
<p>// In-place QuickSort algorithm.<br>// For short (length &lt;= 10) arrays, insertion sort is used for efficiency.</p>
</blockquote>
<p>&#x305D;&#x306E;&#x633F;&#x5165;&#x30BD;&#x30FC;&#x30C8;&#x306B;&#x5BFE;&#x5FDC;&#x3059;&#x308B;&#x30B3;&#x30FC;&#x30C9;&#x306F;&#x4EE5;&#x4E0B;&#x306E;&#x3082;&#x306E;&#x3060;</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">InsertionSort</span>(<span class="params">a, from, to</span>) </span>{</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="keyword">from</span> + <span class="number">1</span>; i &lt; to; i++) {</span><br><span class="line">    <span class="keyword">var</span> element = a[i]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = i - <span class="number">1</span>; j &gt;= <span class="keyword">from</span>; j--) {</span><br><span class="line">      <span class="keyword">var</span> tmp = a[j]</span><br><span class="line">      <span class="keyword">var</span> order = comparefn(tmp, element)</span><br><span class="line">      <span class="keyword">if</span> (order &gt; <span class="number">0</span>) {</span><br><span class="line">        a[j + <span class="number">1</span>] = tmp</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    a[j + <span class="number">1</span>] = element</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>&#x3053;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x4F7F;&#x3063;&#x3066;&#x7591;&#x4F3C;&#x7684;&#x306A;&#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;&#x306E;&#x30BD;&#x30FC;&#x30C8;&#x3092;&#x518D;&#x73FE;&#x3057;&#x3001;&#x3069;&#x306E;&#x3088;&#x3046;&#x306A;&#x7D50;&#x679C;&#x3092;&#x8FD4;&#x3059;&#x304B;&#x78BA;&#x8A8D;&#x3057;&#x3066;&#x307F;&#x308B;&#x3002;</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> compare = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x - y</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">comparefn</span>(<span class="params">x, y</span>) </span>{</span><br><span class="line">  <span class="keyword">if</span> (x === <span class="literal">undefined</span> || y === <span class="literal">undefined</span>) {</span><br><span class="line">    <span class="keyword">return</span> (x === <span class="literal">undefined</span> ? <span class="number">1</span> : <span class="number">0</span>) + (y === <span class="literal">undefined</span> ? <span class="number">-1</span> : <span class="number">0</span>)</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> (compare) {</span><br><span class="line">    <span class="keyword">const</span> v = <span class="built_in">Number</span>(compare.call(<span class="literal">undefined</span>, x, y))</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Number</span>.isNaN(v) ? <span class="number">0</span> : v</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> (<span class="built_in">String</span>(x) &gt; <span class="built_in">String</span>(y) ? <span class="number">1</span> : <span class="number">0</span>) + (<span class="built_in">String</span>(x) &lt; <span class="built_in">String</span>(y) ? <span class="number">-1</span> : <span class="number">0</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">InsertionSort</span>(<span class="params">a, from, to</span>) </span>{</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="keyword">from</span> + <span class="number">1</span>; i &lt; to; i++) {</span><br><span class="line">    <span class="keyword">var</span> element = a[i]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = i - <span class="number">1</span>; j &gt;= <span class="keyword">from</span>; j--) {</span><br><span class="line">      <span class="keyword">var</span> tmp = a[j]</span><br><span class="line">      <span class="keyword">var</span> order = comparefn(tmp, element)</span><br><span class="line">      <span class="keyword">if</span> (order &gt; <span class="number">0</span>) {</span><br><span class="line">        a[j + <span class="number">1</span>] = tmp</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    a[j + <span class="number">1</span>] = element</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">array = [<span class="number">1</span>, <span class="literal">undefined</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">null</span>]</span><br><span class="line">InsertionSort(array, <span class="number">0</span>, array.length)</span><br><span class="line"><span class="built_in">console</span>.log(array)</span><br></pre></td></tr></tbody></table></figure>
<p>&#x7D50;&#x679C;&#x3001;&#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;&#x3068;&#x9055;&#x3046;&#x30BD;&#x30FC;&#x30C8;&#x7D50;&#x679C;&#x306B;&#x306A;&#x3063;&#x3066;&#x3057;&#x307E;&#x3063;&#x305F;&#x3002;&#x3002;&#x3002;</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// &#x5143;&#x914D;&#x5217;</span></span><br><span class="line">&gt; [<span class="number">1</span>, <span class="literal">undefined</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">null</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;</span></span><br><span class="line">&gt; [<span class="literal">null</span>, <span class="number">1</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">undefined</span>]</span><br><span class="line"><span class="comment">// &#x30EA;&#x30E1;&#x30A4;&#x30AF;</span></span><br><span class="line">&gt; [<span class="number">0</span>, <span class="literal">null</span>, <span class="number">1</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="literal">undefined</span>]</span><br><span class="line"><span class="comment">// &#x7591;&#x4F3C;&#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;</span></span><br><span class="line">&gt; [<span class="number">1</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">null</span>, <span class="literal">undefined</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x5168;&#x90E8;&#x3061;&#x304C;&#x3046;&#x3002;&#x3002;&#x3002;</span></span><br></pre></td></tr></tbody></table></figure>
<p>&#x66F4;&#x306B;&#x8A73;&#x7D30;&#x306A;&#x52D5;&#x4F5C;&#x3092;&#x78BA;&#x8A8D;&#x3059;&#x308B;&#x305F;&#x3081;&#x3001;InsertionSort &#x306E; <code>a[j + 1] = element</code> &#x7B87;&#x6240;&#x3067; console.log &#x3092;&#x4ED5;&#x8FBC;&#x307F;&#x3001;&#x914D;&#x5217;&#x306E;&#x9014;&#x4E2D;&#x7D4C;&#x904E;&#x3092;&#x51FA;&#x529B;&#x3059;&#x308B;&#x3088;&#x3046;&#x306B;&#x3057;&#x3066;&#x307F;&#x305F;&#x3002;</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">[ 1, undefined, <span class="string">&apos;z&apos;</span>, 2, <span class="string">&apos;a&apos;</span>, 0, null ]</span><br><span class="line">[ 1, <span class="string">&apos;z&apos;</span>, undefined, 2, <span class="string">&apos;a&apos;</span>, 0, null ]</span><br><span class="line">[ 1, <span class="string">&apos;z&apos;</span>, 2, undefined, <span class="string">&apos;a&apos;</span>, 0, null ]</span><br><span class="line">[ 1, <span class="string">&apos;z&apos;</span>, 2, <span class="string">&apos;a&apos;</span>, undefined, 0, null ]</span><br><span class="line">[ 1, <span class="string">&apos;z&apos;</span>, 2, <span class="string">&apos;a&apos;</span>, 0, undefined, null ]</span><br><span class="line">[ 1, <span class="string">&apos;z&apos;</span>, 2, <span class="string">&apos;a&apos;</span>, 0, null, undefined ]</span><br><span class="line">[ 1, <span class="string">&apos;z&apos;</span>, 2, <span class="string">&apos;a&apos;</span>, 0, null, undefined ]</span><br></pre></td></tr></tbody></table></figure>
<p>&#x3059;&#x308B;&#x3068; undefined &#x304C;&#x305F;&#x3060;&#x5F8C;&#x308D;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x3066;&#x3044;&#x304F;&#x3060;&#x3051;&#x306E;&#x52D5;&#x304D;&#x3092;&#x3057;&#x3066;&#x3044;&#x308B;&#x3053;&#x3068;&#x304C;&#x5206;&#x304B;&#x3063;&#x305F;&#x3002;</p>
<p>&#x3057;&#x304B;&#x3057;<a href="https://www.codereading.com/algo_and_ds/algo/insertion_sort.html" target="_blank" rel="noopener">&#x633F;&#x5165;&#x30BD;&#x30FC;&#x30C8;&#x306E;&#x30A2;&#x30EB;&#x30B4;&#x30EA;&#x30BA;&#x30E0;</a>&#x3092;&#x6539;&#x3081;&#x3066;&#x78BA;&#x8A8D;&#x3059;&#x308B;&#x3068;&#x3001;<code>1, z, 2, a, 0</code> &#x306E;&#x4E26;&#x3073;&#x306F; &#x6570;&#x5024;&#x3068;&#x6587;&#x5B57;&#x3092;&#x6BD4;&#x8F03;&#x3059;&#x308B;&#x3068;&#x7D50;&#x679C;&#x304C;&#x5168;&#x3066; 0 &#x306B;&#x306A;&#x308B;&#x305F;&#x3081;&#x3001;&#x96A3;&#x540C;&#x58EB;&#x306E;&#x6BD4;&#x8F03;&#x3060;&#x3068;&#x52D5;&#x304F;&#x3053;&#x3068;&#x304C;&#x3067;&#x304D;&#x306A;&#x304F;&#x3066;&#x3001;&#x3055;&#x3089;&#x306B; 0 &#x3068; null &#x306E;&#x6BD4;&#x8F03;&#x3082;&#x7D50;&#x679C;&#x306F; 0 &#x306B;&#x306A;&#x308B;&#xFF08;null &#x306F;&#x8A08;&#x7B97;&#x4E0A; 0 &#x6271;&#x3044;&#x306E;&#x70BA;&#xFF09;&#x306E;&#x3067;&#x3001;0 &#x3068; null &#x306E;&#x6BD4;&#x8F03;&#x3082;&#x52D5;&#x304B;&#x306A;&#x3044;&#x3002;&#x7D50;&#x5C40; undefined &#x3060;&#x3051;&#x304C; 0 &#x4EE5;&#x5916;&#x306E;&#x7D50;&#x679C;&#x3092;&#x8FD4;&#x3057;&#x3001;&#x79FB;&#x52D5;&#x3057;&#x3066;&#x3044;&#x304F;&#x5F62;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x3002;&#x3064;&#x307E;&#x308A;&#x52D5;&#x4F5C;&#x3068;&#x3057;&#x3066;&#x306F;&#x4F55;&#x3089;&#x554F;&#x984C;&#x304C;&#x306A;&#x3044;&#x3053;&#x3068;&#x306B;&#x306A;&#x308B;&#x3002;</p>
<p>&#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;&#x306E;&#x3088;&#x3046;&#x306B;null&#x3092;&#x5148;&#x982D;&#x306B;&#x3084;&#x3089;&#x306A;&#x3044;&#x3068;&#x3044;&#x3051;&#x306A;&#x3044;&#x306E;&#x3060;&#x304C;&#x3001;&#x3053;&#x308C;&#x3069;&#x3046;&#x3084;&#x3063;&#x3066;&#x3082; null &#x306F;&#x5148;&#x982D;&#x306B;&#x3044;&#x304B;&#x306A;&#x3044;&#x3088;&#x306A;&#x2026;&#xFF1F;</p>
<h3><span id="&#x6539;&#x3081;&#x3066;-v8-&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x8AAD;&#x3080;">&#x6539;&#x3081;&#x3066; v8 &#x306E;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x8AAD;&#x3080;</span></h3><p>&#x6539;&#x3081;&#x3066; v8 &#x306E;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x8AAD;&#x3093;&#x3067;&#x3044;&#x308B;&#x3068;&#x3001;<a href="https://github.com/v8/v8/blob/676501a8d7e208e16356027925b2ee60bd4fbc9c/src/js/array.js#L792" target="_blank" rel="noopener">&#x5927;&#x4E8B;&#x306A;&#x30B3;&#x30E1;&#x30F3;&#x30C8;</a>&#x3092;&#x898B;&#x9003;&#x3057;&#x3066;&#x3044;&#x305F;&#x3002;</p>
<blockquote>
<p>We also move all non-undefined elements to the front of the array and move the undefineds after that. Holes are removed.</p>
</blockquote>
<p>&#xFF08;&#x610F;&#x8A33;&#xFF09;non-undefined &#x306A;&#x8981;&#x7D20;&#x3092;&#x914D;&#x5217;&#x306E;&#x5148;&#x982D;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x3001;&#x305D;&#x306E;&#x5F8C;&#x308D;&#x306B; undefined &#x306A;&#x8981;&#x7D20;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x305D;&#x3046;&#x3059;&#x308B;&#x3068;&#x7A74;&#x304C;&#x6D88;&#x3048;&#x308B;</p>
<p>&#x3053;&#x306E;&#x51E6;&#x7406;&#x306F; <code>%PrepareElementsForSort(array, length);</code> &#x3068;&#x3044;&#x3046;C++&#x306E;&#x95A2;&#x6570;&#x3067;&#x884C;&#x308F;&#x308C;&#x3066;&#x3044;&#x308B;&#x3088;&#x3046;&#x3060;&#x3002;&#x3053;&#x3053;&#x304B;&#x3089;&#x51E6;&#x7406;&#x3092;&#x8FBF;&#x3063;&#x3066;&#x3044;&#x304D;&#x3001;&#x52D5;&#x4F5C;&#x3092;&#x8A73;&#x3057;&#x304F;&#x898B;&#x3066;&#x307F;&#x308B;&#x3002;</p>
<ul>
<li><a href="https://github.com/v8/v8/blob/676501a8d7e208e16356027925b2ee60bd4fbc9c/src/runtime/runtime-array.cc#L356" target="_blank" rel="noopener">v8/runtime-array.cc at v8/v8#L356</a></li>
<li><a href="https://github.com/v8/v8/blob/676501a8d7e208e16356027925b2ee60bd4fbc9c/src/runtime/runtime-array.cc#L157" target="_blank" rel="noopener">v8/runtime-array.cc at v8/v8#L157</a></li>
</ul>
<p>&#x3059;&#x308B;&#x3068;&#x914D;&#x5217;&#x306E;&#x64CD;&#x4F5C;&#x3092;&#x3057;&#x3066;&#x3044;&#x308B;&#x3068;&#x601D;&#x308F;&#x308C;&#x308B;&#x5834;&#x6240;&#x304C;&#x2026;&#x3042;&#x3063;&#x305F;</p>
<figure class="highlight cpp"><table><tbody><tr><td class="code"><pre><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> undefs = limit;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> holes = limit;</span><br><span class="line">    <span class="comment">// Assume most arrays contain no holes and undefined values, so minimize the</span></span><br><span class="line">    <span class="comment">// number of stores of non-undefined, non-the-hole values.</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; undefs; i++) {</span><br><span class="line">      Object* current = elements-&gt;get(i);</span><br><span class="line">      <span class="keyword">if</span> (current-&gt;IsTheHole(isolate)) {</span><br><span class="line">        holes--;</span><br><span class="line">        undefs--;</span><br><span class="line">      } <span class="keyword">else</span> <span class="keyword">if</span> (current-&gt;IsUndefined(isolate)) {</span><br><span class="line">        undefs--;</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      }</span><br><span class="line">      <span class="comment">// Position i needs to be filled.</span></span><br><span class="line">      <span class="keyword">while</span> (undefs &gt; i) {</span><br><span class="line">        current = elements-&gt;get(undefs);</span><br><span class="line">        <span class="keyword">if</span> (current-&gt;IsTheHole(isolate)) {</span><br><span class="line">          holes--;</span><br><span class="line">          undefs--;</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (current-&gt;IsUndefined(isolate)) {</span><br><span class="line">          undefs--;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">          elements-&gt;<span class="built_in">set</span>(i, current, write_barrier);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>&#x524D;&#x8FF0;&#x306E;&#x30B3;&#x30E1;&#x30F3;&#x30C8;&#x901A;&#x308A;&#x3001;undefined &#x3068; hole(&#x758E;&#x8981;&#x7D20;)&#x3092;&#x914D;&#x5217;&#x306E;&#x5F8C;&#x65B9;&#x3078;&#x79FB;&#x52D5;&#x3055;&#x305B;&#x308B;&#x51E6;&#x7406;&#x3060;&#x3002;&#x305D;&#x306E;&#x5185;&#x5BB9;&#x306F;&#x3056;&#x3063;&#x304F;&#x308A;&#x3068;&#x8A00;&#x3046;&#x3068;&#x3001;<strong>&#x914D;&#x5217;&#x4E2D;&#x306B; undefined &#x304B; hole(&#x758E;&#x8981;&#x7D20;)&#x304C;&#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x3089;&#x3001;&#x6700;&#x5F8C;&#x5C3E;&#x306E;&#x8981;&#x7D20;&#x3068;&#x30B9;&#x30EF;&#x30C3;&#x30D7;&#x3059;&#x308B;</strong>&#x3068;&#x3044;&#x3046;&#x3082;&#x306E;&#x3060;&#x3002;</p>
<p>&#x306A;&#x306E;&#x3067; <code>%PrepareElementsForSort(array, length);</code> &#x304C;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x305F;&#x7D50;&#x679C;&#x3001;array &#x306F;&#x4EE5;&#x4E0B;&#x306E;&#x4E26;&#x3073;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#xFF08;&#x306F;&#x305A;&#x3060;&#xFF09;&#x3002;</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">;[<span class="number">1</span>, <span class="literal">null</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">undefined</span>]</span><br></pre></td></tr></tbody></table></figure>
<p>&#x6539;&#x3081;&#x3066;&#x3053;&#x306E;&#x914D;&#x5217;&#x3067;&#x64EC;&#x4F3C;&#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;&#x306E;&#x30BD;&#x30FC;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x3068;&#x3001;&#x3053;&#x3093;&#x3069;&#x306F;&#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;&#x306E;&#x7D50;&#x679C;&#x3068;&#x540C;&#x7B49;&#x306B;&#x306A;&#x3063;&#x305F;&#x3002;</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">array = [<span class="number">1</span>, <span class="literal">null</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">undefined</span>]</span><br><span class="line">InsertionSort(array, <span class="number">0</span>, array.length)</span><br><span class="line"><span class="built_in">console</span>.log(array)</span><br><span class="line"><span class="comment">// &gt; [null, 1, &apos;z&apos;, 2, &apos;a&apos;, 0, undefined ]</span></span><br></pre></td></tr></tbody></table></figure>
<p>&#x3064;&#x307E;&#x308A;&#x30EA;&#x30E1;&#x30A4;&#x30AF;&#x306E; sort &#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306F;&#x4EE5;&#x4E0B;&#x306E;&#x70B9;&#x3092;&#x6539;&#x826F;&#x3059;&#x308B;&#x3068;&#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;&#x3068;&#x540C;&#x3058;&#x7D50;&#x679C;&#x3092;&#x8FD4;&#x3059;&#x3088;&#x3046;&#x306B;&#x306A;&#x308B;&#x3002;</p>
<ul>
<li>undefined &#x3068; hole&#xFF08;&#x758E;&#x8981;&#x7D20;&#xFF09;&#x306E;&#x79FB;&#x52D5;&#x306F;&#x30BD;&#x30FC;&#x30C8;&#x51E6;&#x7406;&#x524D;&#x306B;&#x884C;&#x3044;&#x3001;&#x6700;&#x5F8C;&#x5C3E;&#x306E;&#x8981;&#x7D20;&#x3068;&#x306E;&#x30B9;&#x30EF;&#x30C3;&#x30D7;&#x3067;&#x884C;&#x3046;&#x3002;</li>
<li>&#x914D;&#x5217;&#x9577;&#x304C; 10 &#x4EE5;&#x4E0B;&#x306E;&#x5834;&#x5408;&#x3001;&#x30AF;&#x30A4;&#x30C3;&#x30AF;&#x30BD;&#x30FC;&#x30C8;&#x3067;&#x306F;&#x306A;&#x304F;&#x633F;&#x5165;&#x30BD;&#x30FC;&#x30C8;&#x3067;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x3002;</li>
</ul>
<h1><span id="&#x3067;-&#x76F4;&#x3059;&#x306E;">&#x3067;&#x3001;&#x76F4;&#x3059;&#x306E;&#xFF1F;</span></h1><p>&#x3058;&#x3064;&#x306F;&#x30EA;&#x30E1;&#x30A4;&#x30AF;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x3067;&#x3082; undefined &#x3068; hole&#xFF08;&#x758E;&#x8981;&#x7D20;&#xFF09;&#x306E;&#x79FB;&#x52D5;&#x306F;&#x5B9F;&#x73FE;&#x3067;&#x304D;&#x3066;&#x3044;&#x308B;&#x3002;&#x305F;&#x3060;&#x79FB;&#x52D5;&#x306E;&#x30A2;&#x30EB;&#x30B4;&#x30EA;&#x30BA;&#x30E0;&#x3067;&#x30B9;&#x30EF;&#x30C3;&#x30D7;&#x3092;&#x884C;&#x3063;&#x3066;&#x3044;&#x306A;&#x3044;&#x3060;&#x3051;&#x3060;&#x3002;&#x305D;&#x3057;&#x3066;&#x3053;&#x306E;&#x79FB;&#x52D5;&#x30A2;&#x30EB;&#x30B4;&#x30EA;&#x30BA;&#x30E0;&#x3068;&#x30BD;&#x30FC;&#x30C8;&#x30A2;&#x30EB;&#x30B4;&#x30EA;&#x30BA;&#x30E0;&#x306F; ECMAScript &#x306E;&#x4ED5;&#x69D8;&#x66F8;&#x3067;&#x306F;&#x898F;&#x5B9A;&#x3055;&#x308C;&#x3066;&#x304A;&#x3089;&#x305A;&#x3001;&#x5B9F;&#x88C5;&#x4F9D;&#x5B58;&#x3068;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x3002;</p>
<p>&#x4ECA;&#x56DE;&#x30EA;&#x30E1;&#x30A4;&#x30AF;&#x3068;&#x30CD;&#x30A4;&#x30C6;&#x30A3;&#x30D6;&#x306E;&#x5DEE;&#x7570;&#x304C;&#x4F55;&#x51E6;&#x306B;&#x3042;&#x308B;&#x304B;&#x3068;&#x3044;&#x3046;&#x70B9;&#x3067;&#x6DF1;&#x5800;&#x308A;&#x3057;&#x3066;&#x307F;&#x305F;&#x304C;&#x3001;&#x30EA;&#x30E1;&#x30A4;&#x30AF;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x306F;&#x73FE;&#x72B6;&#x3067;&#x3082;&#x4ED5;&#x69D8;&#x3092;&#x6E80;&#x305F;&#x3057;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;&#x4FEE;&#x6B63;&#x306F;&#x305B;&#x305A;&#x306B;&#x3053;&#x308C;&#x3067;&#x5B8C;&#x6210;&#x3068;&#x3057;&#x305F;&#x3044;&#x3002;&#xFF08;&#x3068;&#x3044;&#x3046;&#x304B;&#x3053;&#x306E;&#x8ABF;&#x67FB;&#x3067;&#x3082;&#x3046;&#x75B2;&#x308C;&#x304D;&#x3063;&#x305F;&#x2026;&#xFF09;</p>
<p>Array &#x306E;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x306F;&#x307E;&#x3060;&#x5C11;&#x3057;&#x3042;&#x308B;&#x306E;&#x3067;&#x3001;&#x305D;&#x3061;&#x3089;&#x306B;&#x529B;&#x3092;&#x5272;&#x304F;&#x3053;&#x3068;&#x306B;&#x3057;&#x3088;&#x3046;&#x2026;</p>
<p>&#x3064;&#x3065;&#x304F;</p>
<h2><span id="&#x4F59;&#x8AC7;&#x30D6;&#x30E9;&#x30A6;&#x30B6;&#x3067;&#x5B9F;&#x884C;&#x3057;&#x3066;&#x307F;&#x305F;&#x3089;">&#xFF08;&#x4F59;&#x8AC7;&#xFF09;&#x30D6;&#x30E9;&#x30A6;&#x30B6;&#x3067;&#x5B9F;&#x884C;&#x3057;&#x3066;&#x307F;&#x305F;&#x3089;&#x2026;</span></h2><p>JSFiddle &#x3067;&#x4EE5;&#x4E0B;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x5B9F;&#x884C;&#x3057;&#x3066;&#x307F;&#x305F;&#x3068;&#x3053;&#x308D;&#x3001;Firefox &#x306E;&#x307F;&#x9055;&#x3046;&#x30BD;&#x30FC;&#x30C8;&#x7D50;&#x679C;&#x3068;&#x306A;&#x3063;&#x3066;&#x3057;&#x307E;&#x3063;&#x305F;&#x3002;node &#x3068; Chrome &#x306F;&#x540C;&#x3058; v8 &#x3092;&#x4F7F;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3089;&#x540C;&#x3058;&#x7D50;&#x679C;&#x306A;&#x306E;&#x3060;&#x308D;&#x3046;&#x304B;&#x3002;Array#sort &#x304C;&#x983B;&#x7E41;&#x306B;&#x5B9F;&#x88C5;&#x4F9D;&#x5B58;&#x3068;&#x8A00;&#x308F;&#x308C;&#x3066;&#x3044;&#x308B;&#x306E;&#x306F;&#x3053;&#x3046;&#x3044;&#x3046;&#x3053;&#x3068;&#x306A;&#x3093;&#x3060;&#x306A;&#x3002;</p>
<h3><span id="node">node</span></h3><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">array = [<span class="number">1</span>, <span class="literal">undefined</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">null</span>]</span><br><span class="line">array.sort(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x - y)</span><br><span class="line"><span class="built_in">console</span>.log(array)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &gt; [ null, 1, &apos;z&apos;, 2, &apos;a&apos;, 0, undefined ]</span></span><br></pre></td></tr></tbody></table></figure>
<h3><span id="firefox">firefox</span></h3><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">array = [<span class="number">1</span>, <span class="literal">undefined</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">null</span>]</span><br><span class="line">array.sort(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x - y)</span><br><span class="line"><span class="built_in">console</span>.log(array)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &gt; [0, null, &apos;a&apos;, &apos;z&apos;, 1, 2, undefined]</span></span><br></pre></td></tr></tbody></table></figure>
<h2><span id="chrome">Chrome</span></h2><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">array = [<span class="number">1</span>, <span class="literal">undefined</span>, <span class="string">&apos;z&apos;</span>, <span class="number">2</span>, <span class="string">&apos;a&apos;</span>, <span class="number">0</span>, <span class="literal">null</span>]</span><br><span class="line">array.sort(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x - y)</span><br><span class="line"><span class="built_in">console</span>.log(array)</span><br><span class="line"><span class="comment">// &gt; [null, 1, &quot;z&quot;, 2, &quot;a&quot;, 0, undefined]</span></span><br></pre></td></tr></tbody></table></figure>
<h1><span id="&#x53C2;&#x8003;">&#x53C2;&#x8003;</span></h1><ul>
<li><a href="https://www.pandanoir.info/entry/2016/04/16/190000" target="_blank" rel="noopener">&#x8A00;&#x8A9E;&#x4ED5;&#x69D8;&#x304B;&#x3089;&#x5165;&#x308B; JavaScript &#x5165;&#x9580; &#x305D;&#x306E; 1 - Panda Noir</a></li>
<li><a href="https://www.ecma-international.org/ecma-262/6.0/#sec-array.prototype.sort" target="_blank" rel="noopener">ECMAScript 2015 Language Specification &#x2013; ECMA-262 6th Edition</a></li>
<li><a href="https://github.com/v8/v8" target="_blank" rel="noopener">v8/v8: The official mirror of the V8 Git repository</a></li>
</ul>
<!-- ### 謎な部分がある

InsertionSort を実行する前、InnerArraySort を呼び出した直後に以下のブロックがある。`!IS_CALLABLE(comparefn)` となっていることから、comparefn が未定義の場合に comparefn のデフォルト動作を定義する箇所に思えるが、その定義される内容が[Runtime Semantics: SortCompare(x,y)](https://www.ecma-international.org/ecma-262/6.0/#sec-sortcompare)と若干異なるのだ。そもそも仕様上は comparefn の定義有無に関わらずこの処理はあるべき（Step4 で comparefn が呼ばれる為）なのだが、下記のロジックからは Step4 が抜けている。

以下のコードが正しいのであれば、comparefn が定義されている場合、仕様通りの動きをしないのではないか？？

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">if</span> (!IS_CALLABLE(comparefn)) &#123;</span><br><span class="line">    comparefn = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (x === y) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">if</span> (%_IsSmi(x) &amp;&amp; %_IsSmi(y)) &#123;</span><br><span class="line">        <span class="keyword">return</span> %SmiLexicographicCompare(x, y);</span><br><span class="line">      &#125;</span><br><span class="line">      x = TO_STRING(x);</span><br><span class="line">      y = TO_STRING(y);</span><br><span class="line">      <span class="keyword">if</span> (x == y) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">return</span> x &lt; y ? <span class="number">-1</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">` --&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;!-- ## 22.1.3.24 Array.prototype.sort (comparefn)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span>このセクションはECMAScript仕様書の和訳（自力）です。<span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">配列の要素をソートします。ソートは必ずしも安定はしません。（つまり、比較される要素は必ずしも最初の並び順にあるわけではありません。）comparefn が定義されている場合、それは x と y 二つの引数を持つ関数である必要があり、x &lt; y の場合は -1、x = y の場合は 0、x &gt; y の場合は 1 を返します。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">最初に、ソート機能を初期化する為に以下のステップが実行されます。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>text</span><br><span class="line"><span class="number">1.</span> obj に ToObject(<span class="keyword">this</span>) が代入される。         Let obj be ToObject(<span class="keyword">this</span> value).</span><br><span class="line"><span class="number">2.</span> len に ToLength(obj.length) が代入される。   Let len be ToLength(Get(obj, <span class="string">"length"</span>)).</span><br><span class="line"><span class="number">3.</span> ReturnIfAbrupt(len) を実行する。             ReturnIfAbrupt(len).</span><br></pre></td></tr></table></figure>
<p>ソートメソッドの仕様では、オブジェクト(obj)が下のアルゴリズムで true を返す時、疎であると言える。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 数値 i を 0 &lt;= i &lt; len の範囲で列挙する。                     For each integer i in the range 0≤i&lt; len</span><br><span class="line">    a. elem に obj.GetOwnProperty(ToString(i)) を代入する。     Let elem be obj.[[GetOwnProperty]](ToString(i)).</span><br><span class="line">    b. もし elem が未定義(undefined)の場合、trueを返す。         If elem is undefined, return true.</span><br><span class="line">2. falseを返す。                                               Return false.</span><br></pre></td></tr></table></figure>
<p>ソートの順序は昇順で、このファンクションが完了した後に、整数インデックスが len 以下の obj のプロパティ値で並び替えされる。ソート機能の結果は次のように決定される。</p>
<p>comparefn が定義済みかつ、この配列の要素に対し一貫性のある比較関数ではない場合（下記参照）、<strong>ソート順は実装定義です</strong>。comparefn が未定義で、SortCompare（22.1.3.24.1）が一貫性のある比較関数として動作しない時も、<strong>ソート順は実装定義です</strong>。</p>
<p>proto に obj.GetPrototypeOf()を代入する。もし proto が null ではなく、以下の条件を全て満たす整数 j が存在する場合、<strong>ソート順は実装定義</strong>です。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- obj は疎                                  obj is sparse</span><br><span class="line">- 0 &lt;= j &lt; len                              0 ≤ j &lt; len</span><br><span class="line">- HasProperty(proto, ToString(j))は true    HasProperty(proto, ToString(j)) is true.</span><br></pre></td></tr></table></figure>
<p>obj が疎で以下のいずれかの条件に合致するなら<strong>ソート順は実装定義</strong>です。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- IsExtensible(obj) is false.</span><br><span class="line">- 正の整数インデックスがlen以下のいずれかのプロパティで、Configurable属性がfalseのデータプロパティの場合</span><br><span class="line">        Any integer index property of obj whose name is a nonnegative integer less than len is a data property whose [[Configurable]] attribute is false.</span><br></pre></td></tr></table></figure>
<p>obj が以下のいずれかの条件に合致するなら<strong>ソート順は実装定義</strong>です。</p>
<p><code>`</code>text</p>
<ul>
<li><p>objが（プロキシエキゾチックオブジェクトを含む）エキゾチックオブジェクトで、Get、Set、Delete、GetOwnPropertyの動作はこれらの内部メソッドの通常のオブジェクト実装では無い場合<br>  If obj is an exotic object (including Proxy exotic objects) whose behaviour for [[Get]], [[Set]], [[Delete]], and [[GetOwnProperty]] is not the ordinary object implementation of these internal methods.</p>
</li>
<li><p>正の整数インデックスがlen以下のいずれかのプロパティでアクセサプロパティか、Writable属性がfalseのデータプロパティの場合<br>  If any index index property of obj whose name is a nonnegative integer less than len is an accessor property or is a data property whose [[Writable]] attribute is false.</p>
</li>
<li><p>comparefnが未定義で、SortCompareに変更されたobjかいくつかのオブジェクトのプロトタイプチェーンにToStringを適用した値を引数として渡した場合<br>  If comparefn is undefined and the application of ToString to any value passed as an argument to SortCompare modifies obj or any object on obj’s prototype chain.</p>
</li>
<li><p>comparefnが未定義かつ全てにToStringを適用した、SortCompareにいくつかの特定の値を引数として渡した<br>  If comparefn is undefined and all applications of ToString, to any specific value passed as an argument to SortCompare, do not produce the same result.<br><code>`</code> –&gt;</p>
</li>
</ul>
-->
			  		
			  		<!-- google Adsense -->
			  		
					
					
					
					
			    	
					
					<!-- google Adsense Matched content -->
			  		
			  	</div>
				
		  	</article>
		  	
		  	
		  	<!-- TAGS -->
		  	
		  	<div class="meta-content">
				
				<div class="widget">
				  	<h6 class="tag"><span class="fa fa-fw fa-tag"></span>TAGS</h6>
				  	<div class="article-tag">
						<ul class="article-tag-list">
							
					    		<li class="article-tag-list-item">
					    			<a class="article-tag-list-link" href="/tags/javascript/">
					    				javascript
					    			</a>
					    		</li>
							
					    		<li class="article-tag-list-item">
					    			<a class="article-tag-list-link" href="/tags/nodejs/">
					    				nodejs
					    			</a>
					    		</li>
							
						</ul>
					</div>
				</div>
				
			</div>
		  	
		  	
		  	<!-- Categories posts -->
		  	
		  	
		  	
		  	<!-- Detailed categories  posts -->
		  	
		  	
		  	
		  	<!-- Latests -->
		  	
			
		</div>
		
		
		<footer id="footer">
		
			
			
			
			
			<div class="copyright-tool">
				
				
				
				<div class="copyright-title">
					<span>
					&copy; 2018&nbsp;Today&#39;s Commit
					</span>
				</div>
				
				<div class="copyright-license">
					<aside>
						Powered by <a href="https://hexo.io/">Hexo</a>. <a href="https://github.com/tea3/hexo-generator-amp">AMP-Theme</a> designed by <a href="https://photo-tea.com/">tea</a>.
					</aside>
				</div>
			</div>
			
		</footer>
		
		
	</div>
	
	
  	<div id="totop"><a href="#"></a></div>
  	
  	
  </body>
</html>
